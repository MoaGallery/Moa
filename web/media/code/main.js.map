{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/breadcrumb/breadcrumb.component.html","./src/app/breadcrumb/breadcrumb.component.ts","./src/app/gallery.resolver.ts","./src/app/gallery/gallery-edit/gallery-edit.component.html","./src/app/gallery/gallery-edit/gallery-edit.component.ts","./src/app/gallery/gallery-info/gallery-info.component.ts","./src/app/gallery/gallery-info/gallery-info.component.html","./src/app/gallery/gallery-list/gallery-list.component.html","./src/app/gallery/gallery-list/gallery-list.component.ts","./src/app/gallery/gallery-tile/gallery-tile.component.html","./src/app/gallery/gallery-tile/gallery-tile.component.ts","./src/app/gallery/gallery-toolbar/gallery-toolbar.component.ts","./src/app/gallery/gallery-toolbar/gallery-toolbar.component.html","./src/app/home/home-toolbar/home-toolbar.component.ts","./src/app/home/home-toolbar/home-toolbar.component.html","./src/app/image/image-add/image-add.component.html","./src/app/image/image-add/image-add.component.ts","./src/app/image/image-edit/image-edit.component.html","./src/app/image/image-edit/image-edit.component.ts","./src/app/image/image-info/image-info.component.ts","./src/app/image/image-info/image-info.component.html","./src/app/image/image-list/image-list.component.html","./src/app/image/image-list/image-list.component.ts","./src/app/image/image-thumb/image-thumb.component.html","./src/app/image/image-thumb/image-thumb.component.ts","./src/app/image/image-toolbar/image-toolbar.component.ts","./src/app/image/image-toolbar/image-toolbar.component.html","./src/app/models/gallery.model.ts","./src/app/models/parent-gallery.model.ts","./src/app/ngbox/ngbox.component.ts","./src/app/ngbox/ngbox.directive.ts","./src/app/ngbox/ngbox.service.ts","./src/app/pages/gallery-page/gallery-page.component.ts","./src/app/pages/gallery-page/gallery-page.component.html","./src/app/pages/home-page/home-page.component.ts","./src/app/pages/home-page/home-page.component.html","./src/app/pages/image-page/image-page.component.ts","./src/app/pages/image-page/image-page.component.html","./src/app/reducers/index.ts","./src/app/services/button-click.service.ts","./src/app/services/data.service.ts","./src/app/services/gallery-entity.service.ts","./src/app/services/gallery.data.service.ts","./src/app/services/gallery_service.ts","./src/app/services/image_service.ts","./src/app/services/page_data.service.ts","./src/app/services/page_title.service.ts","./src/app/services/simple_gallery-entity.service.ts","./src/app/services/simple_gallery.data.service.ts","./src/app/services/thumbnail.service.ts","./src/environments/environment.ts","./src/main.ts"],"sourcesContent":["import {Component, ElementRef, OnInit} from '@angular/core';\nimport {DataService} from \"./services/data.service\";\nimport {Router} from \"@angular/router\";\nimport {PageTitleService} from \"./services/page_title.service\";\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit {\n    preload = {};\n    data = [];\n\n    constructor(private router: Router,\n                private service: DataService,\n                private pageTitleService: PageTitleService,\n                private elementRef:ElementRef) {\n        this.preload = JSON.parse(this.elementRef.nativeElement.getAttribute('[preload]'));\n    }\n\n    ngOnInit(): void {\n        this.service.setPageData(this.preload);\n    }\n}\n","<breadcrumb></breadcrumb>\n\n<router-outlet></router-outlet>","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\n\nimport { AppComponent } from './app.component';\nimport { BreadcrumbComponent } from './breadcrumb/breadcrumb.component';\nimport { GalleryListComponent } from './gallery/gallery-list/gallery-list.component';\nimport { GalleryTileComponent } from './gallery/gallery-tile/gallery-tile.component';\nimport { DataService } from \"./services/data.service\";\nimport { PageTitleService } from \"./services/page_title.service\";\nimport { PageDataService } from \"./services/page_data.service\";\nimport { HttpClientModule } from \"@angular/common/http\";\nimport { RouterModule, Routes } from \"@angular/router\";\nimport { GalleryPageComponent } from './pages/gallery-page/gallery-page.component';\nimport { HomePageComponent } from './pages/home-page/home-page.component';\nimport { GalleryInfoComponent } from './gallery/gallery-info/gallery-info.component';\nimport { ImageListComponent } from './image/image-list/image-list.component';\nimport { ImageThumbComponent } from './image/image-thumb/image-thumb.component';\nimport { GalleryToolbarComponent } from './gallery/gallery-toolbar/gallery-toolbar.component';\nimport { GalleryEditComponent } from './gallery/gallery-edit/gallery-edit.component';\nimport { ButtonClickService } from \"./services/button-click.service\";\nimport { FormsModule } from \"@angular/forms\";\nimport { GalleryService } from \"./services/gallery_service\";\nimport { ImageService } from \"./services/image_service\";\nimport { ImagePageComponent } from './pages/image-page/image-page.component';\nimport { ImageInfoComponent } from './image/image-info/image-info.component';\nimport { ImageToolbarComponent } from './image/image-toolbar/image-toolbar.component';\nimport { ImageEditComponent } from './image/image-edit/image-edit.component';\nimport { ThumbnailService } from \"./services/thumbnail.service\";\nimport { ImageAddComponent } from \"./image/image-add/image-add.component\";\nimport { FileUploadModule } from 'primeng/fileupload';\nimport { HomeToolbarComponent } from \"./home/home-toolbar/home-toolbar.component\";\nimport { NgBoxService } from \"./ngbox/ngbox.service\";\nimport { NgBoxComponent } from \"./ngbox/ngbox.component\";\nimport { NgBoxDirective } from \"./ngbox/ngbox.directive\";\nimport {EntityDataModule, EntityDataService, EntityDefinitionService, EntityDispatcherDefaultOptions, EntityMetadataMap} from '@ngrx/data';\nimport {GalleryDataService} from './services/gallery.data.service';\nimport {StoreModule} from '@ngrx/store';\nimport {EffectsModule} from '@ngrx/effects';\nimport {StoreDevtoolsModule} from '@ngrx/store-devtools';\nimport {environment} from '../environments/environment';\nimport {metaReducers, reducers} from './reducers';\nimport {GalleryEntityService} from './services/gallery-entity.service';\nimport {GalleryResolver} from './gallery.resolver';\nimport {RouterState, StoreRouterConnectingModule} from '@ngrx/router-store';\nimport {SimpleGalleryDataService} from './services/simple_gallery.data.service';\nimport {SimpleGalleryEntityService} from './services/simple_gallery-entity.service';\n\nconst routes: Routes = [\n\t{\n\t\tpath: '',\n\t\tcomponent: HomePageComponent\n\t},\n\t{\n\t\tpath: 'gallery/:id',\n\t\tcomponent: GalleryPageComponent,\n\t\tresolve: {\n\t\t\t//gallery: GalleryResolver\n\t\t}\n\t},\n\t{\n\t\tpath: 'image/:gallery_id/:image_id',\n\t\tcomponent: ImagePageComponent\n\t}\n];\n\nconst entityMetadata: EntityMetadataMap = {\n\tGallery: {\n\t\tentityDispatcherOptions: {\n\t\t\toptimisticUpdate: true\n\t\t}\n\t},\n\tSimpleGallery: {}\n};\n\n@NgModule({\n\tdeclarations: [\n\t\tAppComponent,\n\t\tBreadcrumbComponent,\n\n\t\tGalleryListComponent,\n\t\tGalleryTileComponent,\n\t\tGalleryInfoComponent,\n\t\tGalleryToolbarComponent,\n\t\tGalleryEditComponent,\n\n\t\tImageListComponent,\n\t\tImageThumbComponent,\n\t\tImageInfoComponent,\n\n\t\tHomeToolbarComponent,\n\n\t\t// Route pages\n\t\tHomePageComponent,\n\t\tGalleryPageComponent,\n\t\tImagePageComponent,\n\t\tImageToolbarComponent,\n\t\tImageEditComponent,\n\t\tImageAddComponent,\n\n\t\tNgBoxComponent,\n\t\tNgBoxDirective\n\t],\n\timports: [\n\t\tBrowserModule,\n\t\tHttpClientModule,\n\t\tRouterModule.forRoot(routes, {}),\n\t\tFormsModule,\n\t\tFileUploadModule,\n\t\tStoreModule.forRoot(reducers, {\n\t\t\tmetaReducers,\n\t\t\truntimeChecks : {\n\t\t\t\tstrictStateImmutability: true,\n\t\t\t\tstrictActionImmutability: true,\n\t\t\t\tstrictActionSerializability: true,\n\t\t\t\tstrictStateSerializability:true\n\t\t\t}\n\t\t}),\n\t\tStoreDevtoolsModule.instrument({maxAge: 25, logOnly: environment.production}),\n\t\tEffectsModule.forRoot(),\n\t\tEntityDataModule.forRoot({}),\n\t\tStoreRouterConnectingModule.forRoot({\n\t\t\tstateKey: 'router',\n\t\t\trouterState: RouterState.Minimal\n\t\t})\n\t],\n\tproviders: [\n\t\tDataService,\n\t\tPageTitleService,\n\t\tPageDataService,\n\t\tButtonClickService,\n\t\tGalleryService,\n\t\tImageService,\n\t\tThumbnailService,\n\t\tNgBoxService,\n\t\tGalleryDataService,\n\t\tGalleryEntityService,\n\t\tGalleryResolver,\n\t\tSimpleGalleryDataService,\n\t\tSimpleGalleryEntityService\n\t],\n\tbootstrap: [\n\t\tAppComponent\n\t]\n})\nexport class AppModule {\n\tconstructor(\n\t\tprivate eds: EntityDefinitionService,\n\t\tprivate entityDataService: EntityDataService,\n\t\tprivate galleryDataService: GalleryDataService,\n\t\tprivate simpleGalleryDataService: SimpleGalleryDataService\n\t) {\n\t\teds.registerMetadataMap(entityMetadata);\n\t\tentityDataService.registerService('Gallery', this.galleryDataService);\n\t\tentityDataService.registerService('SimpleGallery', this.simpleGalleryDataService);\n\t}\n}\n","<ol class=\"breadcrumb\">\n\t<li><a [routerLink]=\"['/']\">Home</a></li>\n\n\t<li *ngFor=\"let crumb of crumbs; let last = last\">\n\t  <a *ngIf=\"!last\"  [routerLink]=\"[getLink(crumb.id)]\">{{crumb.name}}</a>\n\t  <span *ngIf=\"last\">{{crumb.name}}</span>\n\t</li>\n</ol>\n","import {Component, OnDestroy} from '@angular/core';\nimport {Breadcrumb} from \"../models/breadcrumb.model\";\nimport {DataService} from \"../services/data.service\";\nimport {Subscription} from \"rxjs/Subscription\";\n\n@Component({\n  selector: 'breadcrumb',\n  templateUrl: './breadcrumb.component.html',\n  styleUrls: ['./breadcrumb.component.css']\n})\nexport class BreadcrumbComponent implements OnDestroy {\n    crumbs: Breadcrumb[];\n    observer: Subscription;\n\n    constructor(private service: DataService){\n        this.observer = service.getBreadcrumbObserver().subscribe(\n            data => {\n                this.crumbs = data;\n            }\n        );\n    }\n\n    ngOnDestroy(): void {\n        this.observer.unsubscribe();\n    }\n\n    getLink(id) {\n        for (let i = 0; i < this.crumbs.length; i++) {\n            if (this.crumbs[i].id == id) {\n                return '/' + this.crumbs[i].type + '/' + this.crumbs[i].id;\n            }\n        }\n\n        return '/';\n    }\n}\n","import {ActivatedRouteSnapshot, Resolve, RouterStateSnapshot} from '@angular/router';\nimport {Injectable} from '@angular/core';\nimport {Observable} from 'rxjs';\nimport {filter, first, tap} from 'rxjs/operators';\nimport {GalleryEntityService} from './services/gallery-entity.service';\n\n@Injectable()\nexport class GalleryResolver implements Resolve<boolean> {\n\n\tconstructor(private galleryService: GalleryEntityService) {\n\t}\n\n\tresolve(route: ActivatedRouteSnapshot,\n\t        state: RouterStateSnapshot): Observable<boolean> {\n\n\t\treturn this.galleryService.loaded$\n\t\t\t.pipe(\n\t\t\t\ttap(loaded => {\n\t\t\t\t\tif (!loaded) {\n\t\t\t\t\t\t//console.log(route, state)\n\t\t\t\t\t\t//this.galleryService.getAll()//ByKey(route.params.id);\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tfilter(loaded => !!loaded),\n\t\t\t\tfirst()\n\t\t\t);\n\t}\n}\n","<div class=\"modal fade\" id=\"edit-modal\">\n\t<div class=\"modal-dialog\">\n\t\t<div class=\"modal-content\">\n\t\t\t<div class=\"modal-header\">\n\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\n\t\t\t\t<h4 class=\"modal-title\">Edit gallery</h4>\n\t\t\t</div>\n\t\t\t<form action=\"/gallery/{{gallery.id}}\" method=\"post\" class=\"form-horizontal\">\n\t\t\t\t<div class=\"modal-body\">\n\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label for=\"inputGalleryName\" class=\"col-sm-2 control-label\">Name</label>\n\t\t\t\t\t\t<div class=\"col-sm-10\">\n\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" name=\"inputGalleryName\" id=\"inputGalleryName\" placeholder=\"Edit...\" [(ngModel)]=\"name\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label for=\"inputGalleryDescription\" class=\"col-sm-2 control-label\">Description</label>\n\t\t\t\t\t\t<div class=\"col-sm-10\">\n\t\t\t\t\t\t\t<textarea class=\"form-control\" name=\"inputGalleryDescription\" id=\"inputGalleryDescription\" placeholder=\"Edit...\" [(ngModel)]=\"description\"></textarea>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label for=\"inputGalleryParent\" class=\"col-sm-2 control-label\">Parent</label>\n\t\t\t\t\t\t<div class=\"col-sm-10\">\n\t\t\t\t\t\t\t<select class=\"form-control\" name=\"inputGalleryParent\" id=\"inputGalleryParent\" style=\"width: 100%\" *ngIf=\"gallery.parentGallery !== undefined\">\n\t\t\t\t\t\t\t\t<option value=\"{{gallery.parentGallery.id}}\" selected=\"selected\">{{gallery.parentGallery.name}}</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label for=\"inputGalleryTags\" class=\"col-sm-2 control-label\">Tags</label>\n\t\t\t\t\t\t<div class=\"col-sm-10\">\n\t\t\t\t\t\t\t<select class=\"form-control\" name=\"inputGalleryTags[]\" id=\"inputGalleryTags\" style=\"width: 100%\" multiple>\n\t\t\t\t\t\t\t\t<option *ngFor=\"let tag of tagList\" value=\"{{tag.id}}\" selected=\"selected\">{{tag.name}}</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<div class=\"checkbox\">\n\t\t\t\t\t\t\t<div class=\"col-sm-2\"></div>\n\t\t\t\t\t\t\t<div class=\"col-sm-10\">\n\t\t\t\t\t\t\t\t<input type=\"checkbox\" name=\"inputGalleryCombinedView\" id=\"inputGalleryCombinedView\" [(ngModel)]=\"showImages\">\n\t\t\t\t\t\t\t\t<label for=\"inputGalleryCombinedView\" class=\"control-label\">Show images when there are subgalleries</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<div class=\"checkbox\">\n\t\t\t\t\t\t\t<div class=\"col-sm-2\"></div>\n\t\t\t\t\t\t\t<div class=\"col-sm-10\">\n\t\t\t\t\t\t\t\t<input type=\"checkbox\" name=\"inputGalleryUseTags\" id=\"inputGalleryUseTags\" [(ngModel)]=\"useTags\">\n\t\t\t\t\t\t\t\t<label for=\"inputGalleryUseTags\" class=\"control-label\">Populate from tags</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"modal-footer\">\n\t\t\t\t\t<button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n\t\t\t\t\t<input (click)=\"onSubmit()\" type=\"submit\" class=\"btn btn-primary\" value=\"Save changes\">\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</div><!-- /.modal-content -->\n\t</div><!-- /.modal-dialog -->\n</div><!-- /.modal -->\n","import {Component, Input, OnDestroy} from '@angular/core';\nimport {ButtonClickService} from \"../../services/button-click.service\";\nimport {Subscription} from \"rxjs/Subscription\";\nimport {GalleryService} from \"../../services/gallery_service\";\nimport {Router} from \"@angular/router\";\nimport {Gallery} from '../../models/gallery.model';\n\ndeclare var $: any;\n\n@Component({\n  selector: 'gallery-edit',\n  templateUrl: './gallery-edit.component.html',\n  styleUrls: ['./gallery-edit.component.css']\n})\nexport class GalleryEditComponent implements OnDestroy {\n\n\tprivate subscription: Subscription;\n\n\t@Input() gallery: Gallery;\n\taddMode: boolean = false;\n\n\ttagList = [];\n\tname: String = '';\n\tdescription: String = '';\n\tuseTags: boolean = false;\n\tshowImages: boolean = false;\n\n\tconstructor(private buttonClickService: ButtonClickService,\n\t            private galleryService: GalleryService,\n\t            private router: Router) {\n\t\tthis.subscription = this.buttonClickService.notifyObservable$.subscribe(\n\t\t\tdata => {\n\t\t\t\tif ((data.name !== 'galleryEditClick') &&\n\t\t\t\t\t(data.name !== 'galleryAddClick'))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.addMode = data.name === 'galleryAddClick';\n\n\t\t\t\tthis.reset();\n\t\t\t\t$('#edit-modal').modal('show');\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t$('#inputGalleryParent').select2({\n\t\t\t\t\t\tajax: {\n\t\t\t\t\t\t\turl: '/api/gallery_lookup',\n\t\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\t\tdata: function (params) {\n\t\t\t\t\t\t\t\treturn  {\n\t\t\t\t\t\t\t\t\tq: params.term,\n\t\t\t\t\t\t\t\t\tpage: params.page || 1\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t$('#inputGalleryTags').select2({\n\t\t\t\t\t\ttags: true,\n\t\t\t\t\t\tajax: {\n\t\t\t\t\t\t\turl: '/api/tag_lookup',\n\t\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\t\tdata: function (params) {\n\t\t\t\t\t\t\t\treturn  {\n\t\t\t\t\t\t\t\t\tq: params.term,\n\t\t\t\t\t\t\t\t\tpage: params.page || 1\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t)\n\t}\n\n\treset() {\n\t\tif (!this.addMode) {\n\t\t\tthis.name = this.gallery.name;\n\t\t\tthis.description = this.gallery.description;\n\t\t\tthis.useTags = this.gallery.useTags;\n\t\t\tthis.showImages = this.gallery.combinedView;\n\t\t} else\n\t\t{\n\t\t\tthis.name = '';\n\t\t\tthis.description = '';\n\t\t\tthis.useTags = true;\n\t\t\tthis.showImages = false;\n\t\t}\n\t\tthis.tagList = [];\n\n\t\tfor (let tag of this.gallery.tagList) {\n\t\t\tthis.tagList.push({name: tag.name, id: ''+tag.id});\n\t\t}\n\t}\n\n\tonSubmit() {\n\t\t// Select2 isn't synchronising so we have to get the selections manually\n\t\tlet tagData = $('#inputGalleryTags').select2('data');\n\t\tlet tags = [];\n\t\tfor (let tag of tagData)\n\t\t{\n\t\t\ttags.push(tag.id);\n\t\t}\n\n\t\tlet galleryData = $('#inputGalleryParent').select2('data');\n\t\tthis.gallery.parentGallery.id = galleryData[0].id;\n\n\t\tlet id = 0;\n\t\tif (!this.addMode)\n\t\t\tid = this.gallery.id;\n\n\t\tthis.galleryService.SubmitGallery({\n\t\t\tid: id,\n\t\t\tname: this.name,\n\t\t\tdescription: this.description,\n\t\t\tparent: this.gallery.parentGallery.id,\n\t\t\ttags: tags,\n\t\t\tuseTags: this.useTags,\n\t\t\tshowImages: this.showImages\n\t\t}).subscribe(data => {\n\t\t\tlet options =\n\t\t\t{\n\t\t\t\tmessage: 'Gallery saved',\n\t\t\t\tcontainer: '#editSuccessContainer',\n\t\t\t\tduration: 5000\n\t\t\t};\n\t\t\t$.meow(options);\n\t\t\t$('#inputGalleryTags').children().remove();\n\t\t\t$('#edit-modal').modal('hide');\n\n\t\t\tif (this.addMode) {\n\t\t\t\tthis.router.navigate(['/gallery/' + data.message])\n\t\t\t}\n\t\t});\n\t}\n\n\tngOnDestroy(): void {\n\t\tthis.subscription.unsubscribe();\n\t}\n}\n","import {Component} from '@angular/core';\nimport {GalleryEntityService} from '../../services/gallery-entity.service';\nimport {Observable} from 'rxjs';\nimport {Gallery} from '../../models/gallery';\nimport {map} from 'rxjs/operators';\n\n@Component({\n  selector: 'gallery-info',\n  templateUrl: './gallery-info.component.html',\n  styleUrls: ['./gallery-info.component.css']\n})\nexport class GalleryInfoComponent {\n\n\tpublic gallery$: Observable<Gallery>\n\tconstructor(private galleryService: GalleryEntityService) {\n\t}\n\n\tprivate ngOnInit() {\n\t\tthis.gallery$ = this.galleryService.entities$\n\t\t\t.pipe(\n\t\t\t\tmap(gallery => gallery.find(gallery => gallery.id == 32))\n\t\t\t);\n\t}\n}\n","<div *ngIf=\"(gallery$ | async) as gallery\">\n\t<h1>{{gallery.name}}</h1>\n\t<p>\n\t\t{{gallery.description}}\n\t</p>\n</div>\n","<div class=\"row\">\n\t<ul class=\"list-unstyled\">\n\t\t<li *ngFor=\"let gallery of galleries\" class=\"thumbnail col-md-3\" style=\"min-height: 150px;\">\n\t\t\t<gallery-tile [gallery]=\"gallery\"></gallery-tile>\n\t\t</li>\n\t</ul>\n</div>","import {Component} from '@angular/core';\nimport {Gallery} from \"../../models/gallery.model\";\nimport {DataService} from \"../../services/data.service\";\nimport {Subscription} from \"rxjs/Subscription\";\n\n@Component({\n  selector: 'gallery-list',\n  templateUrl: './gallery-list.component.html',\n  styleUrls: ['./gallery-list.component.css']\n})\nexport class GalleryListComponent {\n\n    galleries: Gallery[];\n    observer: Subscription;\n\n    constructor(private service: DataService) {\n        this.observer = service.getGalleriesObserver().subscribe(\n            data => {\n                this.galleries = data;\n            }\n        );\n    }\n\n    ngOnDestroy(): void {\n        this.observer.unsubscribe();\n    }\n}\n","<a [routerLink]=\"[getLink(gallery.id)]\">\n\t<img *ngIf=\"!doesThumbExist(gallery.thumbId)\" src=\"http://placehold.it/300x200\">\n\t<img *ngIf=\"doesThumbExist(gallery.thumbId)\" src=\"/image/thumb/{{gallery.thumbId}}.jpg\">\n\t<h4>{{gallery.name}}</h4>\n</a>\n","import { Component, Input } from '@angular/core';\nimport {Gallery} from \"../../models/gallery.model\";\n\n@Component({\n  selector: 'gallery-tile',\n  templateUrl: './gallery-tile.component.html',\n  styleUrls: ['./gallery-tile.component.css']\n})\nexport class GalleryTileComponent {\n\n    @Input() gallery: Gallery;\n\n    constructor() { }\n    getLink(id) {\n        return '/gallery/' + this.gallery.id;\n    }\n\n\tdoesThumbExist(thumbId: number) {\n    \treturn thumbId !== null;\n\t}\n}\n","import {Component, Input} from '@angular/core';\nimport {DataService} from \"../../services/data.service\";\nimport {ButtonClickService} from \"../../services/button-click.service\";\nimport {GalleryService} from \"../../services/gallery_service\";\nimport {Router} from \"@angular/router\";\nimport {Gallery} from '../../models/gallery';\nimport {GalleryEntityService} from '../../services/gallery-entity.service';\nimport {map, tap} from 'rxjs/operators';\nimport {Observable} from 'rxjs';\n\ndeclare var $: any;\n\n@Component({\n  selector: 'gallery-toolbar',\n  templateUrl: './gallery-toolbar.component.html',\n  styleUrls: ['./gallery-toolbar.component.css']\n})\nexport class GalleryToolbarComponent {\n\n\t@Input() gallery: Gallery;\n\tpublic gallery$: Observable<Gallery>;\n\n\tconstructor(private galleryService: GalleryEntityService,\n\t            private router: Router) {\n\t}\n\n\tprivate ngOnInit() {\n\t\tthis.gallery$ = this.galleryService.entities$\n\t\t\t.pipe(\n\t\t\t\tmap(gallery => gallery.find(gallery => gallery.id == 32))\n\t\t\t);\n\t}\n\n\tonEditClick() {\n\t\t//this.buttonClickService.trigger('galleryEditClick');\n\t}\n\n\tonAddGalleryClick() {\n\t\t//this.buttonClickService.trigger('galleryAddClick');\n\t}\n\n\tonAddImageClick() {\n\t\t//this.buttonClickService.trigger('imageAddClick');\n\t}\n\n\tonDeleteClick() {\n\t\tif (confirm('Delete this gallery?')) {\n\t\t\tthis.galleryService.delete(this.gallery)\n\t\t\t\t.pipe(\n\t\t\t\t\ttap(gallery => {\n\t\t\t\t\t\tlet options =\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmessage: 'Gallery deleted',\n\t\t\t\t\t\t\t\tcontainer: '#editSuccessContainer',\n\t\t\t\t\t\t\t\tduration: 5000\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t$.meow(options);\n\n\t\t\t\t\t\tif (this.gallery.parentId > 0)\n\t\t\t\t\t\t\tthis.router.navigate(['/gallery/' + this.gallery.parentId]);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tthis.router.navigate(['/']);\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t}\n\t}\n}\n","<gallery-edit [gallery]=\"gallery\"></gallery-edit>\n<image-add [gallery]=\"gallery\"></image-add>\n\n<div class=\"row\">\n\t<div class=\"pull-right\">\n\t\t<div class=\"btn-group\" role=\"group\" aria-label=\"...\">\n\t\t\t<button type=\"button\" (click)=\"onAddGalleryClick()\" class=\"btn btn-default\" id=\"galleryAdd\" title=\"Add gallery\" data-toggle=\"tooltip\"><span class=\"glyphicon glyphicon-th\"></span></button>\n\t\t\t<button type=\"button\" (click)=\"onAddImageClick()\" class=\"btn btn-default\" id=\"imageAdd\" title=\"Add image\" data-toggle=\"tooltip\"><span class=\"glyphicon glyphicon-picture\"></span></button>\n\t\t\t<button type=\"button\" (click)=\"onEditClick()\" class=\"btn btn-default\" id=\"galleryEdit\" title=\"Edit gallery\" data-toggle=\"tooltip\"><span class=\"glyphicon glyphicon-pencil\"></span></button>\n\t\t\t<button type=\"button\" (click)=\"onDeleteClick()\" class=\"btn btn-default\" id=\"galleryDelete\" title=\"Delete gallery\" data-toggle=\"tooltip\"><span class=\"glyphicon glyphicon-trash\"></span></button>\n\t\t</div>\n\t</div>\n</div>\n","import {Component, OnDestroy} from '@angular/core';\nimport {DataService} from \"../../services/data.service\";\nimport {Subscription} from \"rxjs/Subscription\";\nimport {ButtonClickService} from \"../../services/button-click.service\";\nimport {GalleryService} from \"../../services/gallery_service\";\nimport {Router} from \"@angular/router\";\n\ndeclare var $: any;\n\n@Component({\n  selector: 'home-toolbar',\n  templateUrl: './home-toolbar.component.html',\n  styleUrls: ['./home-toolbar.component.css']\n})\nexport class HomeToolbarComponent implements OnDestroy {\n\n\tgallery = {\n\t\tid: 0,\n\t\tparent_id: 0,\n\t\tname: '',\n\t\tdescription: '',\n\t\ttag_list: [],\n\t\tparent_gallery: {\n\t\t\tid: 0,\n\t\t\tname: 'Homepage'\n\t\t}\n\t};\n\tobserver: Subscription;\n\n\tconstructor(private dataService: DataService,\n\t            private buttonClickService: ButtonClickService,\n\t            private galleryService: GalleryService,\n\t            private router: Router) {\n\t\tthis.observer = dataService.getGalleryObserver().subscribe(\n\t\t\tdata => {\n\t\t\t\tthis.gallery = data;\n\t\t\t}\n\t\t);\n\t}\n\n\tonAddGalleryClick() {\n\t\tthis.buttonClickService.trigger('galleryAddClick');\n\t}\n\n\tngOnDestroy() {\n\t\tthis.observer.unsubscribe();\n\t}\n}\n","<gallery-edit [gallery]=\"gallery\"></gallery-edit>\n\n<div class=\"row\">\n\t<div class=\"pull-right\">\n\t\t<div class=\"btn-group\" role=\"group\" aria-label=\"...\">\n\t\t\t<button type=\"button\" (click)=\"onAddGalleryClick()\" class=\"btn btn-default\" id=\"galleryAdd\" title=\"Add gallery\" data-toggle=\"tooltip\"><span class=\"glyphicon glyphicon-th\"></span></button>\n\t\t</div>\n\t</div>\n</div>","<div class=\"modal fade\" id=\"add-modal\">\n\t<div class=\"modal-dialog\">\n\t\t<div class=\"modal-content\">\n\t\t\t<div class=\"modal-header\">\n\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\n\t\t\t\t<h4 class=\"modal-title\">Add image</h4>\n\t\t\t</div>\n\t\t\t<form action=\"\" method=\"post\" class=\"form-horizontal\">\n\t\t\t\t<div class=\"modal-body\">\n\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label for=\"inputImageDescription\" class=\"col-sm-2 control-label\">Description</label>\n\t\t\t\t\t\t<div class=\"col-sm-10\">\n\t\t\t\t\t\t\t<textarea class=\"form-control\" name=\"inputImageDescription\" id=\"inputImageDescription\" placeholder=\"Edit...\" [(ngModel)]=\"description\"></textarea>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label for=\"inputImageTags\" class=\"col-sm-2 control-label\">Tags</label>\n\t\t\t\t\t\t<div class=\"col-sm-10\">\n\t\t\t\t\t\t\t<select class=\"form-control\" name=\"inputImageTags[]\" id=\"inputImageTags\" style=\"width: 100%\" multiple>\n\t\t\t\t\t\t\t\t<option *ngFor=\"let tag of tagList\" value=\"{{tag.id}}\" selected=\"selected\">{{tag.name}}</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label for=\"inputImageTags\" class=\"col-sm-2 control-label\">Image</label>\n\t\t\t\t\t\t<div class=\"col-sm-10\">\n\t\t\t\t\t\t\t<p-fileUpload url=\"/api/upload\" name=\"myfile[]\" accept=\"image/*\" auto=\"auto\" (onUpload)=\"onUpload($event)\" multiple=\"multiple\">\n\t\t\t\t\t\t\t\t<ng-template pTemplate=\"content\">\n\t\t\t\t\t\t\t\t\t<ul *ngIf=\"uploadedFiles.length\" class=\"list-unstyled uploaded-image-list\">\n\t\t\t\t\t\t\t\t\t\t<li *ngFor=\"let file of uploadedFiles\">\n\t\t\t\t\t\t\t\t\t\t\t<img width=\"50\" src=\"/image/uploaded/{{file.hash}}\">\n\t\t\t\t\t\t\t\t\t\t\t{{file.name}} - {{file.size}} bytes\n\t\t\t\t\t\t\t\t\t\t\t<a href=\"#\" (click)=\"fileDelete($event, file)\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"glyphicon glyphicon-trash\"></span>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t</ng-template>\n\t\t\t\t\t\t\t</p-fileUpload>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"modal-footer\">\n\t\t\t\t\t<button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n\t\t\t\t\t<input (click)=\"onSubmit()\" type=\"submit\" class=\"btn btn-primary\" value=\"Save changes\">\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</div><!-- /.modal-content -->\n\t</div><!-- /.modal-dialog -->\n</div><!-- /.modal -->\n","import {Component, Input, OnInit} from '@angular/core';\nimport {ButtonClickService} from \"../../services/button-click.service\";\nimport {Subscription} from \"rxjs/Subscription\";\nimport {Router} from \"@angular/router\";\nimport {ImageService} from \"../../services/image_service\";\n\ndeclare var $: any;\n\n@Component({\n  selector: 'image-add',\n  templateUrl: './image-add.component.html',\n  styleUrls: ['./image-add.component.css']\n})\nexport class ImageAddComponent implements OnInit {\n\n\tprivate subscription: Subscription;\n\n\t@Input() gallery;\n\n\tfile;\n\tfilename: String = '';\n\tdescription: String = '';\n\ttagList = [];\n\n\tuploadedFiles: any[] = [];\n\n\tconstructor(private buttonClickService: ButtonClickService,\n\t            private imageService: ImageService,\n\t            private router: Router) {\n\t\tthis.subscription = this.buttonClickService.notifyObservable$.subscribe(\n\t\t\tdata => {\n\t\t\t\tif (data.name !== 'imageAddClick')\n\t\t\t\t\treturn;\n\n\t\t\t\tthis.reset();\n\t\t\t\t$('#add-modal').modal('show');\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t$('#inputImageTags').select2({\n\t\t\t\t\t\ttags: true,\n\t\t\t\t\t\tajax: {\n\t\t\t\t\t\t\turl: '/api/tag_lookup',\n\t\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\t\tdata: function (params) {\n\t\t\t\t\t\t\t\treturn  {\n\t\t\t\t\t\t\t\t\tq: params.term,\n\t\t\t\t\t\t\t\t\tpage: params.page || 1\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t)\n\t}\n\n\treset() {\n\t\tthis.description = '';\n\t\tthis.tagList = [];\n\n\t\tfor (let tag of this.gallery.tag_list) {\n\t\t\tthis.tagList.push({name: tag.name, id: ''+tag.id});\n\t\t}\n\t}\n\n\tonSubmit() {\n\t\t// Select2 isn't synchronising so we have to get the selections manually\n\t\tlet tagData = $('#inputImageTags').select2('data');\n\t\tlet tags = [];\n\t\tfor (let tag of tagData)\n\t\t{\n\t\t\ttags.push(tag.id);\n\t\t}\n\n\t\tlet files = this.uploadedFiles.map((file) => {\n\t\t\treturn file.hash\n\t\t});\n\n\t\tthis.imageService.SubmitImages({\n\t\t\tid: 0,\n\t\t\tgallery_id: this.gallery.id,\n\t\t\tdescription: this.description,\n\t\t\ttags: tags,\n\t\t\tfileHashes: files\n\t\t}).subscribe(data => {\n\t\t\tlet options =\n\t\t\t\t{\n\t\t\t\t\tmessage: 'Image saved',\n\t\t\t\t\tcontainer: '#editSuccessContainer',\n\t\t\t\t\tduration: 5000\n\t\t\t\t};\n\t\t\t$.meow(options);\n\t\t\t$('#inputImageTags').children().remove();\n\t\t\t$('#add-modal').modal('hide');\n\n\t\t\tif (files.length === 1)\n\t\t\t\tthis.router.navigate(['/image/' + this.gallery.id + '/' + data.message]);\n\t\t});\n\t}\n\n\tngOnInit() {\n\t}\n\n\tonUpload(event) {\n\t\tlet response = JSON.parse(event.xhr.response);\n\n\t\tfor (let file of event.files) {\n\t\t\tlet hash = '';\n\n\t\t\tfor (let r of response) {\n\t\t\t\tif (r.filename === file.name)\n\t\t\t\t\thash = r.hash;\n\t\t\t}\n\n\t\t\tfile.hash = hash;\n\t\t\tthis.uploadedFiles.push(file);\n\t\t}\n\t}\n\n\tfileDelete($event, file) {\n\t\t$event.preventDefault();\n\t\tconsole.log(file);\n\t\tlet fileIndex = -1;\n\t\tfor (let {item, index} of this.uploadedFiles.map((item, index) => ({ item, index })))\n\t\t{\n\t\t\tif (item.hash === file.hash)\n\t\t\t\tfileIndex = index;\n\t\t}\n\n\t\tif (fileIndex > -1)\n\t\t\tthis.uploadedFiles.splice(fileIndex, 1);\n\t}\n}\n","<div class=\"modal fade\" id=\"edit-modal\">\n\t<div class=\"modal-dialog\">\n\t\t<div class=\"modal-content\">\n\t\t\t<div class=\"modal-header\">\n\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\n\t\t\t\t<h4 class=\"modal-title\">Edit image</h4>\n\t\t\t</div>\n\t\t\t<form action=\"\" method=\"post\" class=\"form-horizontal\">\n\t\t\t\t<div class=\"modal-body\">\n\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label for=\"inputImageDescription\" class=\"col-sm-2 control-label\">Description</label>\n\t\t\t\t\t\t<div class=\"col-sm-10\">\n\t\t\t\t\t\t\t<textarea class=\"form-control\" name=\"inputImageDescription\" id=\"inputImageDescription\" placeholder=\"Edit...\" [(ngModel)]=\"description\"></textarea>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label for=\"inputImageTags\" class=\"col-sm-2 control-label\">Tags</label>\n\t\t\t\t\t\t<div class=\"col-sm-10\">\n\t\t\t\t\t\t\t<select class=\"form-control\" name=\"inputImageTags[]\" id=\"inputImageTags\" style=\"width: 100%\" multiple>\n\t\t\t\t\t\t\t\t<option *ngFor=\"let tag of tagList\" value=\"{{tag.id}}\" selected=\"selected\">{{tag.name}}</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"modal-footer\">\n\t\t\t\t\t<button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n\t\t\t\t\t<input (click)=\"onSubmit()\" type=\"submit\" class=\"btn btn-primary\" value=\"Save changes\">\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</div><!-- /.modal-content -->\n\t</div><!-- /.modal-dialog -->\n</div><!-- /.modal -->\n","import {Component, Input, OnInit} from '@angular/core';\nimport {ButtonClickService} from \"../../services/button-click.service\";\nimport {Subscription} from \"rxjs/Subscription\";\nimport {Router} from \"@angular/router\";\nimport {ImageService} from \"../../services/image_service\";\n\ndeclare var $: any;\n\n@Component({\n  selector: 'image-edit',\n  templateUrl: './image-edit.component.html',\n  styleUrls: ['./image-edit.component.css']\n})\nexport class ImageEditComponent implements OnInit {\n\n\tprivate subscription: Subscription;\n\n\t@Input() image;\n\n\tid: String = '0';\n\ttagList = [];\n\tdescription: String = '';\n\n\tconstructor(private buttonClickService: ButtonClickService,\n\t            private imageService: ImageService,\n\t            private router: Router) {\n\t\tthis.subscription = this.buttonClickService.notifyObservable$.subscribe(\n\t\t\tdata => {\n\t\t\t\tif (data.name !== 'imageEditClick')\n\t\t\t\t\treturn;\n\n\t\t\t\tthis.reset();\n\t\t\t\t$('#edit-modal').modal('show');\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t$('#inputImageTags').select2({\n\t\t\t\t\t\ttags: true,\n\t\t\t\t\t\tajax: {\n\t\t\t\t\t\t\turl: '/api/tag_lookup',\n\t\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\t\tdata: function (params) {\n\t\t\t\t\t\t\t\treturn  {\n\t\t\t\t\t\t\t\t\tq: params.term,\n\t\t\t\t\t\t\t\t\tpage: params.page || 1\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t)\n\t}\n\n\treset() {\n\t\tthis.id = ''+this.image.id;\n\t\tthis.description = this.image.description;\n\t\tthis.tagList = [];\n\n\t\tlet tags = [];\n\t\tfor (let tag of this.image.tag_list) {\n\t\t\tthis.tagList.push({name: tag.name, id: ''+tag.id});\n\t\t\ttags.push(''+tag.id);\n\t\t}\n\t\t$('#inputImageTags').val(tags);\n\t}\n\n\tonSubmit() {\n\t\t// Select2 isn't synchronising so we have to get the selections manually\n\t\tlet tagData = $('#inputImageTags').select2('data');\n\t\tlet tags = [];\n\t\tfor (let tag of tagData)\n\t\t{\n\t\t\ttags.push(tag.id);\n\t\t}\n\n\t\tthis.imageService.SubmitImages({\n\t\t\tid: this.image.id,\n\t\t\tgallery_id: this.image.gallery_id,\n\t\t\tdescription: this.description,\n\t\t\ttags: tags,\n\t\t}).subscribe(data => {\n\t\t\tlet options =\n\t\t\t\t{\n\t\t\t\t\tmessage: 'Image saved',\n\t\t\t\t\tcontainer: '#editSuccessContainer',\n\t\t\t\t\tduration: 5000\n\t\t\t\t};\n\t\t\t$.meow(options);\n\t\t\t$('#inputImageTags').children().remove();\n\t\t\t$('#edit-modal').modal('hide');\n\t\t});\n\t}\n\n\tngOnInit() {\n\t}\n\n}\n","import { Component, OnDestroy } from '@angular/core';\nimport {DataService} from \"../../services/data.service\";\nimport {Subscription} from \"rxjs/Subscription\";\nimport {NgBoxService} from \"../../ngbox/ngbox.service\";\n\n@Component({\n  selector: 'image-info',\n  templateUrl: './image-info.component.html',\n  styleUrls: ['./image-info.component.css']\n})\nexport class ImageInfoComponent implements OnDestroy {\n\n\timage = {\n\t\tid: 0,\n\t\timage_src: '',\n\t\tdescription: '',\n\t\tformat: 'jpg',\n\t\tfilename: ''\n\t};\n\tobserver: Subscription;\n\timageFullUrl: string;\n\n\tconstructor(private service: DataService) {\n\t\tthis.imageFullUrl = this.getFullImageUrl();\n\t\tthis.observer = service.getImageObserver().subscribe(\n\t\t\tdata => {\n\t\t\t\tthis.image = data;\n\t\t\t\tthis.imageFullUrl = this.getFullImageUrl();\n\t\t\t}\n\t\t);\n\t}\n\n\tngOnDestroy() {\n\t\tthis.observer.unsubscribe();\n\t}\n\n\tgetFullImageUrl() {\n\t\treturn '/image/' + this.image.id + '/' + this.image.filename;\n\t}\n}\n","<div class=\"moa-page\">\n\t<p>\n\t\t{{image.description}}\n\t</p>\n\t<div class=\"image-container\">\n\t\t<a [href]=\"getFullImageUrl()\" ng-box [title]=\"image.filename\" class=\"image-lightbox-link\">\n\t\t\t<img src=\"{{image.image_src}}\">\n\t\t</a>\n\t</div>\n\t<br>\n\t<div class=\"row\">\n\t\t<a [href]=\"getFullImageUrl()\" target=\"_blank\" class=\"btn btn-info col-md-2 col-md-offset-5\">\n\t\t\t<span class=\"glyphicon glyphicon-new-window pull-left\"></span> Open in new tab\n\t\t</a>\n\t</div>\n</div>\n<ngbox></ngbox>","<ul class=\"list-unstyled\">\n\t<li *ngFor=\"let image of images\" class=\"thumbnail\">\n\t\t<image-thumb [image]=\"image\" [gallery_id]=\"gallery.id\">\n\t\t</image-thumb>\n\t</li>\n</ul>\n","import {Component, OnInit, OnDestroy} from '@angular/core';\nimport {Subscription} from \"rxjs/Subscription\";\nimport {DataService} from \"../../services/data.service\";\nimport {ThumbnailService} from \"../../services/thumbnail.service\";\n\n@Component({\n  selector: 'image-list',\n  templateUrl: './image-list.component.html',\n  styleUrls: ['./image-list.component.css']\n})\nexport class ImageListComponent implements OnInit, OnDestroy {\n\n\tstatic readonly TARGET_HEIGHT: Number = 300;\n\tstatic readonly GALLERY_WIDTH: Number = 1140;\n\n\timages: Array<any>;\n\tgallery: Array<any>;\n\timagesObserver: Subscription;\n\tgalleryObserver: Subscription;\n\tthumbSub: Subscription;\n\n\tconstructor(private service: DataService,\n\t            private thumbService: ThumbnailService) {\n\t\tthis.imagesObserver = service.getImagesObserver().subscribe(\n\t\t\tdata => {\n\t\t\t\tthis.images = data;\n\t\t\t\tthis.checkThumbs();\n\t\t\t}\n\t\t);\n\n\t\tthis.galleryObserver = service.getGalleryObserver().subscribe(\n\t\t\tdata => {\n\t\t\t\tthis.gallery = data;\n\t\t\t}\n\t\t);\n\t}\n\n\tngOnInit() {\n\t\tthis.checkThumbs();\n\t}\n\n\tprivate checkThumbs() {\n\t\tlet imageWidths = [];\n\t\tlet totalWidth = 0;\n\n\t\tif (this.thumbSub !== undefined)\n\t\t\tthis.thumbSub.unsubscribe();\n\n\t\tlet toGenerate = [];\n\t\tif (this.images !== undefined) {\n\t\t\tfor (let image of this.images) {\n\t\t\t\tif (image.isGenerating) {\n\t\t\t\t\ttoGenerate.push(parseInt(image.id));\n\t\t\t\t}\n\n\t\t\t\tlet width = image.width * (Number(ImageListComponent.TARGET_HEIGHT) / image.height);\n\t\t\t\timageWidths.push(width);\n\t\t\t\ttotalWidth += width;\n\t\t\t}\n\n\t\t\tif (toGenerate.length > 0)\n\t\t\t\tthis.getThumbs(toGenerate);\n\n\t\t\tlet maxWidth = Number(ImageListComponent.GALLERY_WIDTH) * 1.2;\n\n\t\t\tlet rows = [];\n\t\t\tlet row = {\n\t\t\t\twidth: 0,\n\t\t\t\timages: 0\n\t\t\t};\n\t\t\tlet i = 0;\n\t\t\twhile (i < imageWidths.length) {\n\t\t\t\trow.width += imageWidths[i];\n\t\t\t\trow.images++;\n\t\t\t\tif ((row.width > ImageListComponent.GALLERY_WIDTH) &&\n\t\t\t\t\t(row.images > 1)) {\n\t\t\t\t\tif (row.width > maxWidth) {\n\t\t\t\t\t\trow.width -= imageWidths[i];\n\t\t\t\t\t\trow.images--;\n\t\t\t\t\t\trows.push(row);\n\t\t\t\t\t\trow = {\n\t\t\t\t\t\t\twidth: imageWidths[i],\n\t\t\t\t\t\t\timages: 1\n\t\t\t\t\t\t};\n\t\t\t\t\t} else {\n\t\t\t\t\t\trows.push(row);\n\t\t\t\t\t\trow = {\n\t\t\t\t\t\t\twidth: 0,\n\t\t\t\t\t\t\timages: 0\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ti++;\n\t\t\t}\n\t\t\tif ((row.images === 1) &&\n\t\t\t\t(rows.length > 0)){\n\t\t\t\trows[rows.length-1].images++;\n\t\t\t\trows[rows.length-1].width += row.width;\n\t\t\t\trow = {\n\t\t\t\t\twidth: 0,\n\t\t\t\t\timages: 0\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ((row.images > 1) ||\n\t\t\t\t(rows.length === 0)) {\n\t\t\t\trows.push(row);\n\t\t\t}\n\n\t\t\ti = 0;\n\t\t\tfor (let row of rows) {\n\t\t\t\tlet scaleFactor = Number(ImageListComponent.GALLERY_WIDTH) / row.width;\n\t\t\t\tfor (let j = 0; j < row.images; j++) {\n\t\t\t\t\tthis.images[i].displayWidth = Math.floor(imageWidths[i] * scaleFactor);\n\t\t\t\t\tthis.images[i].displayHeight = Math.floor   (Number(ImageListComponent.TARGET_HEIGHT) * scaleFactor);\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate getThumbs(toGenerate: Array<number>) {\n\t\tthis.thumbSub = this.thumbService.getStatus(toGenerate).subscribe(data => {\n\t\t\tlet nextBatch = [];\n\t\t\tfor (let image of toGenerate) {\n\t\t\t\tlet found: boolean = false;\n\t\t\t\tfor (let notDoneYet of data) {\n\t\t\t\t\tif (image == notDoneYet)\n\t\t\t\t\t\tfound = true;\n\t\t\t\t}\n\n\t\t\t\tif (!found) {\n\t\t\t\t\tfor (let i of this.images) {\n\t\t\t\t\t\tif (image == i.id)\n\t\t\t\t\t\t\ti.isGenerating = false;\n\t\t\t\t\t}\n\t\t\t\t} else\n\t\t\t\t{\n\t\t\t\t\tnextBatch.push(image);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.thumbSub.unsubscribe();\n\n\t\t\tif (nextBatch.length > 0) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.getThumbs(nextBatch);\n\t\t\t\t}, 200);\n\t\t\t}\n\t\t});\n\t}\n\n\tngOnDestroy() {\n\t\tthis.imagesObserver.unsubscribe();\n\t\tthis.galleryObserver.unsubscribe();\n\t}\n}\n","<div>\n\t<a [routerLink]=\"[getLink()]\">\n\t\t<img *ngIf=\"!image.isGenerating && image.displayWidth <= 450 && image.displayHeight <= 300\" src=\"/image/thumb/{{image.id}}.jpg\" [ngStyle]=\"{width: (image.displayWidth - 10) + 'px', height: image.displayHeight + 'px'}\">\n\t\t<img *ngIf=\"!image.isGenerating && (image.displayWidth > 450 || image.displayHeight > 300)\" src=\"/image/thumb/{{image.id}}-w.jpg\" [ngStyle]=\"{width: (image.displayWidth - 10) + 'px', height: image.displayHeight + 'px'}\">\n\t\t<img *ngIf=\"image.isGenerating\" src=\"/media/spinner.svg\" class=\"thumbnail-generating\">\n\t\t<span>{{image.filename}}</span>\n\t</a>\n</div>\n","import {Component, Input} from '@angular/core';\n\n@Component({\n  selector: 'image-thumb',\n  templateUrl: './image-thumb.component.html',\n  styleUrls: ['./image-thumb.component.css']\n})\nexport class ImageThumbComponent {\n\n\t@Input() image: any;\n\t@Input() gallery_id: any;\n\n\tconstructor() { }\n\tgetLink() {\n\t\treturn '/image/' + this.gallery_id + '/' + this.image.id;\n\t}\n\n}\n","import { Component, OnDestroy } from '@angular/core';\nimport {ButtonClickService} from \"../../services/button-click.service\";\nimport {DataService} from \"../../services/data.service\";\nimport {Subscription} from \"rxjs/Subscription\";\nimport {Router} from \"@angular/router\";\nimport {ImageService} from \"../../services/image_service\";\n\ndeclare var $: any;\n\n@Component({\n  selector: 'image-toolbar',\n  templateUrl: './image-toolbar.component.html',\n  styleUrls: ['./image-toolbar.component.css']\n})\nexport class ImageToolbarComponent implements OnDestroy {\n\n\timage = {\n\t\tid: 0,\n\t\tname: '',\n\t\tdescription: '',\n\t\tgallery_id: 0\n\t};\n\tobserver: Subscription;\n\n\tconstructor(private dataService: DataService,\n\t\t\t\tprivate buttonClickService: ButtonClickService,\n\t\t\t\tprivate imageService: ImageService,\n\t            private router: Router) {\n\t\tthis.observer = dataService.getImageObserver().subscribe(\n\t\t\tdata => {\n\t\t\t\tthis.image = data;\n\t\t\t}\n\t\t);\n\t}\n\n\tonEditClick() {\n\t\tthis.buttonClickService.trigger('imageEditClick');\n\t}\n\n\tonDeleteClick() {\n\t\tif (confirm('Delete this image?')) {\n\t\t\tthis.imageService.DeleteImage(this.image.id).subscribe(next => {\n\t\t\t\tlet options =\n\t\t\t\t\t{\n\t\t\t\t\t\tmessage: 'Image deleted',\n\t\t\t\t\t\tcontainer: '#editSuccessContainer',\n\t\t\t\t\t\tduration: 5000\n\t\t\t\t\t};\n\t\t\t\t$.meow(options);\n\n\t\t\t\tthis.router.navigate(['/gallery/' + this.image.gallery_id]);\n\t\t\t});\n\t\t}\n\t}\n\n\tngOnDestroy() {\n\t\tthis.observer.unsubscribe();\n\t}\n}\n","<image-edit [image]=\"image\"></image-edit>\n\n<div class=\"row\">\n\t<div class=\"pull-right\">\n\t\t<div class=\"btn-group\" role=\"group\" aria-label=\"...\">\n\t\t\t<button type=\"button\" (click)=\"onEditClick()\" class=\"btn btn-default\" id=\"imageEdit\" title=\"Edit image\" data-toggle=\"tooltip\"><span class=\"glyphicon glyphicon-pencil\"></span></button>\n\t\t\t<button type=\"button\" (click)=\"onDeleteClick()\" class=\"btn btn-default\" id=\"imageDelete\" title=\"Delete image\" data-toggle=\"tooltip\"><span class=\"glyphicon glyphicon-trash\"></span></button>\n\t\t</div>\n\t</div>\n</div>","import {Tag} from './tag.model';\nimport {ParentGallery} from './parent-gallery.model';\nimport {isArrayLike, isNumeric} from 'rxjs/internal-compatibility';\n\nexport class Gallery {\n    id: number;\n    name: string;\n    thumbId: number;\n    parentId: number;\n    parentGallery: ParentGallery;\n    tagList: Array<Tag>;\n    description: string;\n    useTags: boolean;\n    combinedView: boolean;\n\n    constructor(){\n        this.fromData({\n\t        id: 0,\n\t        name: '',\n\t        thumbId: 0,\n\t        parentId: 0,\n\t        tagList: [],\n\t        description: 'description',\n\t        useTags: true,\n\t        combinedView: false\n        });\n    }\n\n    public fromData(data) {\n    \tif (isNumeric(data.id))\n    \t    this.id = data.id;\n    \tif (typeof data.name === 'string')\n\t        this.name = data.name;\n\t    if (isNumeric(data.thumbId))\n\t\t    this.thumbId = data.thumbId;\n\t    if (isNumeric(data.parentId))\n\t\t    this.parentId = data.parentId;\n\t    if (typeof data.parentGallery === 'object') {\n\t\t    this.parentGallery.id = data.parentGallery.id;\n\t\t    this.parentGallery.name = data.parentGallery.name;\n\t    }\n\t    if (Array.isArray(data.tagList))\n\t\t    this.tagList = data.tagList;\n\t    if (typeof data.description === 'string')\n\t\t    this.description = data.description;\n\t    if (typeof data.useTags === 'boolean')\n\t\t    this.useTags = data.useTags;\n\t    if (typeof data.combinedView === 'boolean')\n\t\t    this.combinedView= data.combinedView;\n    }\n}\n","export class ParentGallery {\n    id: number;\n    name: string;\n\n    public fromData(data) {\n    \tthis.id = data.id;\n\t    this.name = data.name;\n    }\n}\n","import { Component, Input, Output, EventEmitter, ViewChild, ElementRef, HostListener, DoCheck } from '@angular/core';\nimport { NgBoxService } from './ngbox.service';\n\n\n@Component({\n    selector: 'my-ngbox, ngbox',\n    template: `\n        <div id=\"ngBoxLoading\" *ngIf=\"ngBox.loading\"><img src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNv\nZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxucz0iaHR0cD\novL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjAiIHdpZHRo\nPSIxNjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMTI4IDE2IiB4bWw6c3BhY2U9InByZXNlcnZlIj48c2NyaXB0IHR5cGU9InRleHQvZW\nNtYXNjcmlwdCIgeGxpbms6aHJlZj0iLy9wcmVsb2FkZXJzLm5ldC9qc2NyaXB0cy9zbWlsLnVzZXIuanMiLz48cGF0aCBmaWxsPSIjZmZmZmZmIiBm\naWxsLW9wYWNpdHk9IjAuNDE5NjA3ODQzMTM3MjUiIGQ9Ik02LjQsNC44QTMuMiwzLjIsMCwxLDEsMy4yLDgsMy4yLDMuMiwwLDAsMSw2LjQsNC44Wm\n0xMi44LDBBMy4yLDMuMiwwLDEsMSwxNiw4LDMuMiwzLjIsMCwwLDEsMTkuMiw0LjhaTTMyLDQuOEEzLjIsMy4yLDAsMSwxLDI4LjgsOCwzLjIsMy4y\nLDAsMCwxLDMyLDQuOFptMTIuOCwwQTMuMiwzLjIsMCwxLDEsNDEuNiw4LDMuMiwzLjIsMCwwLDEsNDQuOCw0LjhabTEyLjgsMEEzLjIsMy4yLDAsMS\nwxLDU0LjQsOCwzLjIsMy4yLDAsMCwxLDU3LjYsNC44Wm0xMi44LDBBMy4yLDMuMiwwLDEsMSw2Ny4yLDgsMy4yLDMuMiwwLDAsMSw3MC40LDQuOFpt\nMTIuOCwwQTMuMiwzLjIsMCwxLDEsODAsOCwzLjIsMy4yLDAsMCwxLDgzLjIsNC44Wk05Niw0LjhBMy4yLDMuMiwwLDEsMSw5Mi44LDgsMy4yLDMuMi\nwwLDAsMSw5Niw0LjhabTEyLjgsMEEzLjIsMy4yLDAsMSwxLDEwNS42LDgsMy4yLDMuMiwwLDAsMSwxMDguOCw0LjhabTEyLjgsMEEzLjIsMy4yLDAs\nMSwxLDExOC40LDgsMy4yLDMuMiwwLDAsMSwxMjEuNiw0LjhaIi8+PGc+PHBhdGggZmlsbD0iI2ZmZmZmZiIgZmlsbC1vcGFjaXR5PSIxIiBkPSJNLT\nQyLjcsMy44NEE0LjE2LDQuMTYsMCwwLDEtMzguNTQsOGE0LjE2LDQuMTYsMCwwLDEtNC4xNiw0LjE2QTQuMTYsNC4xNiwwLDAsMS00Ni44Niw4LDQu\nMTYsNC4xNiwwLDAsMS00Mi43LDMuODRabTEyLjgtLjY0QTQuOCw0LjgsMCwwLDEtMjUuMSw4YTQuOCw0LjgsMCwwLDEtNC44LDQuOEE0LjgsNC44LD\nAsMCwxLTM0LjcsOCw0LjgsNC44LDAsMCwxLTI5LjksMy4yWm0xMi44LS42NEE1LjQ0LDUuNDQsMCwwLDEtMTEuNjYsOGE1LjQ0LDUuNDQsMCwwLDEt\nNS40NCw1LjQ0QTUuNDQsNS40NCwwLDAsMS0yMi41NCw4LDUuNDQsNS40NCwwLDAsMS0xNy4xLDIuNTZaIi8+PGFuaW1hdGVUcmFuc2Zvcm0gYXR0cm\nlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJ0cmFuc2xhdGUiIHZhbHVlcz0iMjMgMDszNiAwOzQ5IDA7NjIgMDs3NC41IDA7ODcuNSAwOzEwMCAw\nOzExMyAwOzEyNS41IDA7MTM4LjUgMDsxNTEuNSAwOzE2NC41IDA7MTc4IDAiIGNhbGNNb2RlPSJkaXNjcmV0ZSIgZHVyPSI3ODBtcyIgcmVwZWF0Q2\n91bnQ9ImluZGVmaW5pdGUiLz48L2c+PC9zdmc+Cg==\"/></div>\n        <div id=\"ngBoxWrapper\" (click)=\"closeOutside($event)\" *ngIf=\"ngBox.open\" [ngStyle]=\"{'padding-top': offsetHeight+'px'}\">\n            <div id=\"ngBoxContent\">\n                <img *ngIf=\"getHasGroup()\" class=\"left\" (click)=\"previousNgBox()\" src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvb\nj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNS4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyB\nWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL\n0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDA\nwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iNzBweCIgaGVpZ2h0PSIxMDBwe\nCIgdmlld0JveD0iMCAwIDcwIDEwMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgNzAgMTAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwb2x5Z29uIGZpbGw\n9IiNGRkZGRkYiIHN0cm9rZT0iIzZCNkI2QiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludHM9IjQ1LjYsOTguNTI0IDE0LjU0NCw1MCA0NS42LDEuNDc2IDQ4L\njgwMSwzLjUyNCAxOS4wNTYsNTAgDQoJNDguODAxLDk2LjQ3NiAiLz4NCjwvc3ZnPg0K\">\n                <img *ngIf=\"getHasGroup()\" class=\"right\" (click)=\"nextNgBox()\" src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0i\nMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNS4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZX\nJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dy\nYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3\nN2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iNzBweCIgaGVpZ2h0PSIxMDBweCIg\ndmlld0JveD0iMCAwIDcwIDEwMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgNzAgMTAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwb2x5Z29uIGZpbGw9Ii\nNGRkZGRkYiIHN0cm9rZT0iIzZCNkI2QiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludHM9IjE3Ljc0Niw5OC41MjQgNDguODAxLDUwIDE3Ljc0NiwxLjQ3NiAx\nNC41NDUsMy41MjQgDQoJNDQuMjg5LDUwIDE0LjU0NSw5Ni40NzYgIi8+DQo8L3N2Zz4NCg==\">\n                <img *ngIf=\"ngBox.current.type == 1\"\n                     (load)=\"isLoaded()\"\n                     #ngBoxContent\n                     [src]=\"ngBox.current.url\"\n                     [hidden]=\"ngBox.loading\"\n                     (click)=\"nextNgBox()\"\n                     alt=\"\">\n                <iframe *ngIf=\"ngBox.current.type == 2\"\n                        #ngBoxContent\n                        [src]=\"ngBox.current.url\"\n                        width=\"{{ngBox.current.width}}\"\n                        height=\"{{ngBox.current.height}}\"\n                        frameborder=\"0\"\n                        allowfullscreen>\n                </iframe>\n                <iframe *ngIf=\"ngBox.current.type == 3\"\n                        [src]=\"ngBox.current.url\"\n                        #ngBoxContent\n                        width=\"{{ngBox.current.width}}\"\n                        height=\"{{ngBox.current.height}}\"\n                        frameborder=\"0\"\n                        webkitallowfullscreen\n                        mozallowfullscreen\n                        allowfullscreen>\n                </iframe>\n                <iframe *ngIf=\"ngBox.current.type == 4\"\n                        #ngBoxContent\n                        [src]=\"ngBox.current.url\"\n                        frameborder=\"0\"\n                        width=\"{{ngBox.current.width}}\"\n                        height=\"{{ngBox.current.height}}\"\n                        allowfullscreen>\n                </iframe>\n            </div>\n            <div #ngBoxButtons id=\"buttons\" [hidden]=\"ngBox.loading\">\n                <p>\n                    <span class=\"title\" *ngIf=\"ngBox.current.title\">{{ngBox.current.title}}<br/></span>\n                    <span class=\"pages\" *ngIf=\"getHasGroup()\">{{getCurrentIndex()}} of {{getCount()}}</span>\n                </p>\n                <img (click)=\"closeNgBox()\" id=\"closeButton\" src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZG\nluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNS4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAw\nIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy\n8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6\neGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMzBweCIgaGVpZ2h0PSIzMHB4IiB2aWV3Qm94PSIwID\nAgMzAgMzAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDMwIDMwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHN0cm9r\nZT0iIzZCNkI2QiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludHM9IjI4LjUsMi44NCAyNS40NjMsMS41IDE1LDEyLjc0OSA0LjUzOSwxLjUgMS41LDIuODQgDQ\noJMTIuODExLDE1IDEuNSwyNy4xNiA0LjUzOSwyOC41IDE1LDE3LjI1MSAyNS40NjMsMjguNSAyOC41LDI3LjE2IDE3LjE4OSwxNSAiLz4NCjwvc3ZnPg0K\" alt=\"\">\n            </div>\n\n\n\n\n\n\n        </div>\n    `,\n    styles: [`\n        #ngBoxLoading{\n            text-align: center;\n            z-index: 10001;\n            width: 100%;\n            height: 100%;\n            color: white;\n            position: fixed;\n            top: 46%;\n            font-size: 20px;\n        }\n        #ngBoxWrapper {\n            background-color: rgba(0, 0, 0, 0.9);\n            position: fixed;\n            top: 0px;\n            left: 0px;\n            text-align: center;\n            z-index: 10000;\n            width: 100%;\n            height: 100%;\n        }\n\n        #ngBoxWrapper #ngBoxContent img {\n            -webkit-border-radius: 4px;\n            -moz-border-radius: 4px;\n            border-radius: 4px;\n        }\n\n        #ngBoxContent {\n            display: block;\n        }\n\n        button {\n            font-size: 12px;\n        }\n\n        iframe {\n            max-width: 100%;\n            max-height: 100%;\n        }\n        #buttons{\n            position: relative;\n            margin: 5px auto;\n            text-align: right;\n        }\n        #buttons p{\n            float: left;\n            color: white;\n            text-align: left;\n            margin: 0 50px 0 0;\n            font-size: 12px;\n            font-family: sans-serif;\n        }\n        #buttons span.title{\n            display: block;\n            height: 18px;\n            overflow: hidden;\n        }\n        #closeButton{\n            position: absolute;\n            top: 0px;\n            right: 0px;\n            cursor: pointer;\n        }\n        .left{\n            position: fixed;\n            left: -5px;\n            margin-top: -42px;\n            cursor: pointer;\n            top: 50%;\n        }\n        .right{\n            position: fixed;\n            right: -10px;\n            margin-top: -42px;\n            cursor: pointer;\n            top: 50%;\n        }\n    `]\n})\nexport class NgBoxComponent implements DoCheck {\n\n    offsetHeight: number;\n    interval: any;\n    @Input() data: any;\n    @Output() showMore = new EventEmitter();\n    @ViewChild('ngBoxContent', {}) elementView: ElementRef;\n    @ViewChild('ngBoxButtons', {}) elementButtons: ElementRef;\n\n    constructor(\n        public ngBox: NgBoxService\n    ) {\n    }\n\n    ngDoCheck() {\n        if (this.ngBox.open === true && this.elementView === undefined) {\n            this.checkInterval();\n        }\n    }\n\n    closeOutside($event) {\n        if ($event.target.getAttribute('id') === 'ngBoxContent' || $event.target.getAttribute('id') === 'ngBoxWrapper') {\n            this.closeNgBox();\n        }\n    }\n\n    checkInterval() {\n        let t = setInterval(() => {\n            if (this.elementView && this.elementButtons  ) {\n                this.resize();\n                // Stop Loading on frames\n                if (this.ngBox.current.type === 2 || this.ngBox.current.type === 3 || this.ngBox.current.type === 4) {\n                    this.ngBox.loading = false;\n                }\n\n                clearInterval(t);\n            }\n        }, 10);\n    }\n\n    closeNgBox() {\n        this.ngBox.open = false;\n    }\n\n    elementExist() {\n        if (this.elementView !== undefined) {\n            return true;\n        }\n        return false;\n    }\n\n    @HostListener('window:resize', ['$event'])\n    resize() {\n        // Resize big images\n\n        if ( this.elementView && this.elementButtons) {\n            let currentWidth = this.calcPercent(this.ngBox.current.width, window.innerWidth);\n            let currentHeight = this.calcPercent(this.ngBox.current.height, window.innerHeight);\n\n            let realWidth   = this.elementView.nativeElement.naturalWidth ?\n                              this.elementView.nativeElement.naturalWidth : currentWidth;\n            let realHeight  = this.elementView.nativeElement.naturalHeight ?\n                              this.elementView.nativeElement.naturalHeight : currentHeight;\n\n\n            let maxWidth    = Math.min((window.innerWidth - 70), currentWidth ? currentWidth : realWidth);\n            let maxHeight   = Math.min((window.innerHeight - 60), currentHeight ? currentHeight : realHeight);\n\n            let ratio       = Math.min( maxWidth / realWidth, maxHeight / realHeight);\n\n            this.elementView.nativeElement.width    = realWidth * ratio;\n            this.elementView.nativeElement.height   = realHeight * ratio;\n\n\n            this.elementButtons.nativeElement.style.width = this.elementView.nativeElement.offsetWidth + 'px';\n\n            // Calculate top padding\n            this.offsetHeight = (window.innerHeight - 40 - this.elementView.nativeElement.offsetHeight) / 2;\n            if (this.offsetHeight < 0) {\n                this.offsetHeight = 0;\n            }\n        }\n    }\n\n\n\n\n    @HostListener('window:keydown', ['$event'])\n    checkKeyPress(event: KeyboardEvent) {\n        if ( event.keyCode === 39 ) {\n            this.nextNgBox();\n        }else if ( event.keyCode === 37 ) {\n            this.previousNgBox();\n        }else if ( event.keyCode === 27 ) {\n            this.closeNgBox();\n        }\n    }\n\n    calcPercent(value, of) {\n        if (value !== undefined && value.toString().search('%') >= 0) {\n            return of * parseInt(value.toString(), 0) / 100;\n        }\n        return value;\n    }\n\n    getHasGroup() {\n        return this.ngBox.current.group !== undefined;\n    }\n\n    getCount() {\n        return this.ngBox.images.filter(image => image.group === this.ngBox.current.group).length;\n    }\n\n    getCurrentIndex() {\n        let currentGroup = this.ngBox.images.filter(image => image.group === this.ngBox.current.group);\n        return currentGroup.map(function (e) {\n            return e.id;\n        }).indexOf(this.ngBox.current.id) + 1;\n    }\n\n    nextNgBox() {\n        if ( this.ngBox.current.group === undefined ) {\n            return false;\n        }\n        this.ngBox.loading = true;\n        let currentGroup = this.ngBox.images.filter(image => image.group === this.ngBox.current.group);\n        let pos = currentGroup.map(function (e) {\n            return e.id;\n        }).indexOf(this.ngBox.current.id);\n        if (pos >= currentGroup.length - 1) {\n            this.ngBox.current = currentGroup[0];\n        } else {\n            this.ngBox.current = currentGroup[pos + 1];\n        }\n        this.checkInterval();\n    }\n\n    previousNgBox() {\n        if ( this.ngBox.current.group === undefined ) {\n            return false;\n        }\n        this.ngBox.loading = true;\n        let currentGroup = this.ngBox.images.filter(image => image.group === this.ngBox.current.group);\n        let pos = currentGroup.map(function (e) {\n            return e.id;\n        }).indexOf(this.ngBox.current.id);\n        if (pos === 0) {\n            pos = currentGroup.length;\n        }\n        this.ngBox.current = currentGroup[pos - 1];\n        this.checkInterval();\n    }\n\n    isLoaded() {\n        if (this.ngBox.current.type === 1) {\n            this.ngBox.loading = false;\n        }\n\n        this.checkInterval();\n    }\n\n}\n","import { Directive, AfterViewInit, HostListener, Input, OnDestroy } from '@angular/core';\r\nimport { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';\r\nimport { NgBoxService } from './ngbox.service';\r\n\r\n@Directive({\r\n    selector: '[myNgBox],[ng-box]'\r\n})\r\nexport class NgBoxDirective implements AfterViewInit, OnDestroy {\r\n\r\n    id: number;\r\n    data: {};\r\n    @Input() src: any;\r\n    @Input() href: any;\r\n    @Input() title: string;\r\n    @Input() width: string;\r\n    @Input() height: string;\r\n    @Input() group: string;\r\n    @Input() cache: boolean;\r\n    @Input() image: boolean;\r\n    currentHref: string;\r\n\tcurrentSrc: string;\r\n\r\n    constructor(\r\n        public ngBox: NgBoxService,\r\n        public sanitizer: DomSanitizer\r\n    ) {\r\n    }\r\n\r\n\tngOnDestroy() {\r\n    \tthis.removeImage();\r\n\t}\r\n\r\n    ngAfterViewInit() {\r\n        this.ngBox.id = this.id = this.ngBox.id + 1;\r\n        this.updateImage();\r\n    }\r\n\r\n\tremoveImage() {\r\n\t\tlet pos = this.ngBox.images.map(function(e) { return e.id; }).indexOf(this.id);\r\n\t\tif (pos !== -1)\r\n\t\t\tthis.ngBox.images.splice(pos, 1);\r\n\t}\r\n\r\n    updateImage() {\r\n\t    let src = this.src ? this.src : this.href;\r\n\t    this.data = this.getData(src);\r\n\t    this.ngBox.images.push( this.data );\r\n    }\r\n\r\n    @HostListener('click', ['$event'])\r\n    onClick($event) {\r\n        $event.preventDefault();\r\n\r\n\t    this.removeImage();\r\n\t    this.updateImage();\r\n\r\n        this.ngBox.loading = true;\r\n        this.ngBox.current = this.data;\r\n        this.ngBox.open = true;\r\n    }\r\n\r\n    getData(url: string): SafeResourceUrl | boolean {\r\n        if (url !== undefined || url !== '') {\r\n            // Youtube\r\n            let regExp = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|\\&v=|\\?v=)([^#\\&\\?]*).*/;\r\n            let match = url.match(regExp);\r\n            if (match && match[2].length === 11) {\r\n                return {\r\n                    id: this.id,\r\n                    url: this.sanitizer.bypassSecurityTrustResourceUrl('https://www.youtube.com/embed/' + match[2] + '?autoplay=0'),\r\n                    type: 2,\r\n                    title: this.title,\r\n                    width: this.width ? this.width : 640,\r\n                    height: this.height ? this.height : 380,\r\n                    group: this.group\r\n                };\r\n            }\r\n            // Vimeo\r\n            regExp = /^.*(vimeo\\.com\\/)((channels\\/[A-z]+\\/)|(groups\\/[A-z]+\\/videos\\/))?([0-9]+)/;\r\n            match = url.match(regExp);\r\n            if (match && match[5].length === 8) {\r\n                return {\r\n                    id: this.id,\r\n                    url: this.sanitizer.bypassSecurityTrustResourceUrl('https://player.vimeo.com/video/' + match[5]),\r\n                    type: 3,\r\n                    title: this.title,\r\n                    width: this.width ? this.width : 640,\r\n                    height: this.height ? this.height : 380,\r\n                    group: this.group\r\n                };\r\n            }\r\n            if (!url.match(/\\.(png|jpg|jpeg|gif|JPG|PNG|JPEG|GIF)$/) && this.image !== true) {\r\n\r\n                return {\r\n                    id: this.id,\r\n                    url: this.sanitizer.bypassSecurityTrustResourceUrl(url),\r\n                    type: 4,\r\n                    title: this.title,\r\n                    width: this.width ? this.width : 1000,\r\n                    height: this.height ? this.height : 480,\r\n                    group: this.group\r\n                };\r\n            }\r\n/*            if (url.search('photoshooter') >= 0 || url.search('news247') >= 0) {\r\n                return {\r\n                    id: this.id,\r\n                    url: this.sanitizer.bypassSecurityTrustResourceUrl(url),\r\n                    type: 4,\r\n                    title: this.title,\r\n                    width: this.width ? this.width : 1000,\r\n                    height: this.height ? this.height : 480,\r\n                    group: this.group\r\n                };\r\n            }*/\r\n            if (this.cache) { (new Image()).src = url; }\r\n            return {\r\n                id: this.id,\r\n                url: url,\r\n                type: 1,\r\n                title: this.title,\r\n                width: this.width,\r\n                height: this.height,\r\n                group: this.group\r\n            };\r\n\r\n        }\r\n    }\r\n\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class NgBoxService {\r\n\r\n    public id = 0;\r\n    public current: any;\r\n    public loading = false;\r\n    public open = false;\r\n    public images: any = [];\r\n\r\n    constructor() { }\r\n\r\n}\r\n","import { Component, OnInit } from '@angular/core';\nimport {ActivatedRoute} from \"@angular/router\";\nimport {PageDataService} from \"../../services/page_data.service\";\nimport {Gallery} from '../../models/gallery';\nimport {GalleryService} from '../../services/gallery_service';\nimport {GalleryEntityService} from '../../services/gallery-entity.service';\nimport {Observable} from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { tap } from 'rxjs/operators';\nimport {SimpleGallery} from '../../models/simple_gallery';\nimport {SimpleGalleryEntityService} from '../../services/simple_gallery-entity.service';\n\n@Component({\n\tselector: 'gallery-page',\n\ttemplateUrl: './gallery-page.component.html',\n\tstyleUrls: ['./gallery-page.component.css']\n})\nexport class GalleryPageComponent implements OnInit {\n\n\tpublic gallery$: Observable<Gallery>;\n\tpublic simpleGalleries$: Observable<SimpleGallery[]>;\n\tpublic id: number = 32;\n\n\tconstructor(private route: ActivatedRoute,\n\t            private galleryEntityService: GalleryEntityService,\n\t            private simpleGalleryEntityService: SimpleGalleryEntityService) {\n\t\tconsole.log(this.route);\n\t}\n\n\tngOnInit(): void {\n\t\tthis.gallery$ = this.galleryEntityService.entities$\n\t\t\t.pipe(\n\t\t\t\ttap(galleries => {console.log(galleries)}),\n\t\t\t\tmap(galleries => galleries.find(gallery => gallery.id == this.id))\n\t\t\t);\n\t\tthis.simpleGalleries$ = this.simpleGalleryEntityService.entities$\n\t\t\t.pipe(\n\t\t\t\ttap(simpleGalleries => {console.log(simpleGalleries)}),\n\t\t\t\tmap(galleries => galleries.filter(gallery => gallery.parentId == this.id))\n\t\t\t);\n\t\tthis.simpleGalleryEntityService.getAll();\n\n\t\tthis.route.params.subscribe(params => {\n\t\t\tthis.galleryEntityService.getByKey(this.id);\n\t\t});\n\t}\n}\n","<div *ngIf=\"(gallery$ | async) as gallery\">\n\t<gallery-toolbar [gallery]=\"gallery\"></gallery-toolbar>\n\t<div class=\"course\">\n\t\t[{{gallery | json}}]\n\t</div>\n</div>\n[\n<div class=\"course\" *ngFor=\"let simpleGallery of (simpleGalleries$ | async)\">\n\t{{simpleGallery | json}}\n</div>\n]\n<gallery-info></gallery-info>\n<gallery-list></gallery-list>\n<image-list></image-list>\n","import {Component, OnInit} from '@angular/core';\nimport {PageDataService} from \"../../services/page_data.service\";\n\n@Component({\n    selector: 'moa',\n    templateUrl: './home-page.component.html',\n    styleUrls: ['./home-page.component.css']\n})\nexport class HomePageComponent implements OnInit {\n    constructor(private page_data_service: PageDataService) {\n    }\n\n    ngOnInit(): void {\n    \tthis.page_data_service.GetHomePageData();\n    }\n}\n","<home-toolbar></home-toolbar>\n\n<gallery-list></gallery-list>","import { Component, OnInit } from '@angular/core';\nimport {ActivatedRoute} from \"@angular/router\";\nimport {PageDataService} from \"../../services/page_data.service\";\n\n@Component({\n  selector: 'image-page',\n  templateUrl: './image-page.component.html',\n  styleUrls: ['./image-page.component.css']\n})\nexport class ImagePageComponent implements OnInit {\n\n  constructor(private route: ActivatedRoute,\n              private page_data_service: PageDataService) { }\n\n  ngOnInit() {\n\t  this.route.params.subscribe(params => {\n\t\t  this.page_data_service.GetImagePageData(params['image_id'], params['gallery_id']);\n\t  });\n  }\n\n}\n","<image-toolbar></image-toolbar>\n<image-info></image-info>","import {\n\tActionReducer,\n\tActionReducerMap,\n\tcreateFeatureSelector,\n\tcreateSelector,\n\tMetaReducer\n} from '@ngrx/store';\nimport { environment } from '../../environments/environment';\nimport {routerReducer} from '@ngrx/router-store';\n\nexport interface AppState {\n\n}\n\nexport const reducers: ActionReducerMap<AppState> = {\n\trouter: routerReducer\n};\n\nexport function logger(reducer:ActionReducer<any>)\n\t: ActionReducer<any> {\n\treturn (state, action) => {\n\t\tconsole.log(\"state before: \", state);\n\t\tconsole.log(\"action\", action);\n\n\t\treturn reducer(state, action);\n\t}\n\n}\n\n\nexport const metaReducers: MetaReducer<AppState>[] =\n\t!environment.production ? [logger] : [];\n\n\n","import { Injectable } from '@angular/core';\nimport {Subject} from \"rxjs\";\n\n@Injectable()\nexport class ButtonClickService {\n\n\tprivate notify = new Subject<any>();\n\tnotifyObservable$ = this.notify.asObservable();\n\n\tconstructor() {}\n\n\tpublic trigger(name: string, data: any = null) {\n\t\tif (name) {\n\t\t\tthis.notify.next({\n\t\t\t\tname: name,\n\t\t\t\tdata: data\n\t\t\t});\n\t\t}\n\t}\n}\n","import {Injectable} from \"@angular/core\";\nimport {HttpClient} from \"@angular/common/http\";\nimport {BehaviorSubject} from \"rxjs\";\nimport {Observable} from \"rxjs/\";\nimport 'rxjs/add/operator/map';\nimport 'rxjs/add/operator/filter';\n\n@Injectable()\nexport class DataService {\n    data: BehaviorSubject<any>;\n\n    constructor(private http: HttpClient) {\n        this.data = new BehaviorSubject<any>([]);\n    }\n\n    setPageData(pageData): void {\n        this.data.next(pageData);\n    }\n\n    getBreadcrumbObserver(): Observable<any> {\n        return this.data\n            .map(data => {\n                return data.breadcrumbs;\n            })\n            .filter(data => data !== undefined);\n    }\n\n    getGalleriesObserver(): Observable<any> {\n        return this.data\n            .map(data => {\n                return data.galleries;\n            })\n            .filter(data => data !== undefined);\n    }\n\n\tgetGalleryObserver(): Observable<any> {\n\t\treturn this.data\n\t\t\t.map(data => {\n\t\t\t\t// TODO: Convert to Gallery model?\n\t\t\t\treturn data.gallery;\n\t\t\t})\n\t\t\t.filter(data => data !== undefined);\n\t}\n\n\tgetImageObserver(): Observable<any> {\n\t\treturn this.data\n\t\t\t.map(data => {\n\t\t\t\t// TODO: Convert to Image model?\n\t\t\t\treturn data.image;\n\t\t\t})\n\t\t\t.filter(data => data !== undefined);\n\t}\n\n\tgetImagesObserver(): Observable<any> {\n\t\treturn this.data\n\t\t\t.map(data => {\n\t\t\t\treturn data.images;\n\t\t\t})\n\t\t\t.filter(data => data !== undefined);\n\t}\n\n\tgetPageTitleObserver(): Observable<any> {\n\t\treturn this.data\n\t\t\t.map(data => {\n\t\t\t\treturn data.page_title;\n\t\t\t})\n\t\t\t.filter(data => data !== undefined);\n\t}\n\n}\n","import {EntityCollectionServiceBase, EntityCollectionServiceElementsFactory} from '@ngrx/data';\nimport {Gallery} from '../models/gallery';\nimport {Injectable} from '@angular/core';\n\n@Injectable()\nexport class GalleryEntityService extends EntityCollectionServiceBase<Gallery> {\n\tconstructor(serviceElementsFactory: EntityCollectionServiceElementsFactory) {\n\t\tsuper('Gallery', serviceElementsFactory);\n\t}\n}\n","import {Injectable} from '@angular/core';\nimport {DefaultDataService, HttpUrlGenerator} from '@ngrx/data';\nimport {Gallery} from '../models/gallery';\nimport {HttpClient} from '@angular/common/http';\nimport {Observable} from 'rxjs';\n\n@Injectable()\nexport class GalleryDataService extends DefaultDataService<Gallery> {\n\tconstructor(http: HttpClient, httpUrlGenerator: HttpUrlGenerator) {\n\t\tsuper('Gallery', http, httpUrlGenerator);\n\t}\n\n\t/*public getById(key: number | string): Observable<any> {\n\t\treturn this.http.get('/api/page_data/gallery_page/' + key);\n\t}*/\n}\n","import {Injectable} from \"@angular/core\";\nimport {DataService} from \"./data.service\";\nimport {HttpClient} from \"@angular/common/http\";\nimport {Subject} from \"rxjs\";\nimport {Observable} from \"rxjs\";\nimport {Gallery} from '../models/gallery.model';\nimport {Subscription} from 'rxjs/Subscription';\nimport {ParentGallery} from '../models/parent-gallery.model';\n\n@Injectable()\nexport class GalleryService {\n\tget gallery(): Gallery {\n\t\treturn this._gallery;\n\t}\n\n\tprotected api_url: string = '/api/gallery/';\n\tprivate _gallery: Gallery;\n\n\tprivate galleryObserver: Subscription;\n\n\tconstructor(private dataService: DataService,\n\t            private http: HttpClient) {\n\t\tthis._gallery = new Gallery();\n\t\tthis._gallery.tagList = [];\n\t\tthis._gallery.parentGallery = new ParentGallery();\n\t\tthis.galleryObserver = dataService.getGalleryObserver().subscribe(\n\t\t\tdata => {\n\t\t\t\tthis._gallery.fromData(data);\n\t\t\t}\n\t\t);\n\t}\n\n\tSubmitGallery(data): Observable<any> {\n\t\tlet url = this.api_url + data.id;\n\t\tlet subject = new Subject();\n\n\t\tlet body = {\n\t\t\tname: data.name,\n\t\t\tdescription: data.description,\n\t\t\tparent: data.parent,\n\t\t\ttags: data.tags,\n\t\t\tuseTags: data.useTags,\n\t\t\tshowImages: data.showImages\n\t\t};\n\n\t\tif (data.id > 0) {\n\t\t\tthis.http.put(url, body).subscribe(data => {\n\t\t\t\tsubject.next({success: data['success'], message: data['message']});\n\t\t\t\tthis.dataService.setPageData(data);\n\t\t\t});\n\t\t} else {\n\t\t\tthis.http.post(url, body).subscribe(data => {\n\t\t\t\tsubject.next({success: data['success'], message: data['message']});\n\t\t\t\tthis.dataService.setPageData(data);\n\t\t\t});\n\t\t}\n\n\t\treturn subject.asObservable();\n\t}\n\n\tDeleteGallery(id): Observable<any> {\n\t\tlet url = this.api_url + id;\n\t\tlet subject = new Subject();\n\n\t\tthis.http.delete(url)\n\t\t\t.subscribe(data => {\n\t\t\t\tsubject.next({success: data['success'], message: data['message']});\n\t\t\t});\n\n\t\treturn subject.asObservable();\n\t}\n}\n","import {Injectable} from \"@angular/core\";\nimport {DataService} from \"./data.service\";\nimport {HttpClient} from \"@angular/common/http\";\nimport {Subject} from \"rxjs\";\nimport {Observable} from \"rxjs\";\n\n@Injectable()\nexport class ImageService {\n\n\tprotected api_url: string = '/api/image/';\n\n\tconstructor(private dataService: DataService,\n\t            private http: HttpClient) {\n\t}\n\n\tSubmitImages(data): Observable<any> {\n\t\tlet url = this.api_url + data.id;\n\t\tlet subject = new Subject();\n\n\t\tlet body = {\n\t\t\tid: data.id,\n\t\t\tgallery_id: data.gallery_id,\n\t\t\tdescription: data.description,\n\t\t\ttags: data.tags,\n\t\t\tfileHashes: data.fileHashes\n\t\t};\n\n\t\tif (data.id > 0) {\n\t\t\tthis.http.put(url, body).subscribe(data => {\n\t\t\t\tsubject.next({success: data['success'], message: data['message']});\n\t\t\t\tthis.dataService.setPageData(data);\n\t\t\t});\n\t\t} else {\n\t\t\tthis.http.post(url, body).subscribe(data => {\n\t\t\t\tsubject.next({success: data['success'], message: data['message']});\n\t\t\t\tthis.dataService.setPageData(data);\n\t\t\t});\n\t\t}\n\n\t\treturn subject.asObservable();\n\t}\n\n\tDeleteImage(id): Observable<any> {\n\t\tlet url = this.api_url + id;\n\t\tlet subject = new Subject();\n\n\t\tthis.http.delete(url)\n\t\t\t.subscribe(data => {\n\t\t\t\tsubject.next({success: data['success'], message: data['message']});\n\t\t\t});\n\n\t\treturn subject.asObservable();\n\t}\n}\n","import {Injectable} from \"@angular/core\";\nimport {DataService} from \"./data.service\";\nimport {HttpClient} from \"@angular/common/http\";\n\n@Injectable()\nexport class PageDataService {\n\tprotected api_url: string = '/api/page_data/';\n\n    constructor(private data_service: DataService, private http: HttpClient) {\n    }\n\n    GetPageData(url: string) {\n\t    this.http.get(url).subscribe(data => {\n\t\t    this.data_service.setPageData(data);\n\t    });\n    }\n\n    GetHomePageData() {\n\t    let url = this.api_url + 'home_page';\n\t    this.GetPageData(url);\n    }\n\n\tGetGalleryPageData(id: number) {\n\t\tlet url = this.api_url + 'gallery_page/' + id;\n\t\tthis.GetPageData(url);\n\t}\n\n\tGetImagePageData(image_id: number, gallery_id: number) {\n\t\tlet url = this.api_url + 'image_page/' + gallery_id + '/' + image_id;\n\t\tthis.GetPageData(url);\n\t}\n}","import {Injectable, OnDestroy} from \"@angular/core\";\nimport {Subscription} from \"rxjs\";\nimport {DataService} from \"./data.service\";\n\n@Injectable()\nexport class PageTitleService implements OnDestroy{\n\n\tobserver: Subscription;\n\n    constructor(private service: DataService) {\n\t    this.observer = service.getPageTitleObserver().subscribe(\n\t\t    data => {\n\t\t\t\tdocument.title = data;\n\t\t    }\n\t    );\n    }\n\n\tngOnDestroy(): void {\n\t\tthis.observer.unsubscribe();\n\t}\n}\n","import {EntityCollectionServiceBase, EntityCollectionServiceElementsFactory} from '@ngrx/data';\nimport {SimpleGallery} from '../models/simple_gallery';\nimport {Injectable} from '@angular/core';\n\n@Injectable()\nexport class SimpleGalleryEntityService extends EntityCollectionServiceBase<SimpleGallery> {\n\tconstructor(serviceElementsFactory: EntityCollectionServiceElementsFactory) {\n\t\tsuper('SimpleGallery', serviceElementsFactory);\n\t}\n}\n","import {Injectable} from '@angular/core';\nimport {DefaultDataService, HttpUrlGenerator} from '@ngrx/data';\nimport {SimpleGallery} from '../models/simple_gallery';\nimport {HttpClient} from '@angular/common/http';\n\n@Injectable()\nexport class SimpleGalleryDataService extends DefaultDataService<SimpleGallery> {\n\tconstructor(http: HttpClient, httpUrlGenerator: HttpUrlGenerator) {\n\t\tsuper('SimpleGallery', http, httpUrlGenerator);\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport {Subject} from \"rxjs\";\nimport {HttpClient} from \"@angular/common/http\";\nimport {Observable} from \"rxjs\";\n\n@Injectable()\nexport class ThumbnailService {\n\n\tprivate api_url: string = '/api/thumbnail_status';\n\n\tconstructor(private http: HttpClient) {}\n\n\tpublic getStatus(data: Array<number> = null): Observable<any> {\n\t\tlet subject = new Subject();\n\n\t\tlet params = data.join(',');\n\t\tlet url = this.api_url + '?images=' + params;\n\n\t\tthis.http.get(url).subscribe(data => {\n\t\t\tsubject.next(data);\n\t\t});\n\n\t\treturn subject.asObservable();\n\t}\n}\n","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n  production: false\n};\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n"],"names":["AppComponent","constructor","router","service","pageTitleService","elementRef","preload","JSON","parse","nativeElement","getAttribute","ngOnInit","setPageData","selectors","decls","vars","template","i0","BrowserModule","BreadcrumbComponent","GalleryListComponent","GalleryTileComponent","DataService","PageTitleService","PageDataService","HttpClientModule","RouterModule","GalleryPageComponent","HomePageComponent","GalleryInfoComponent","ImageListComponent","ImageThumbComponent","GalleryToolbarComponent","GalleryEditComponent","ButtonClickService","FormsModule","GalleryService","ImageService","ImagePageComponent","ImageInfoComponent","ImageToolbarComponent","ImageEditComponent","ThumbnailService","ImageAddComponent","FileUploadModule","HomeToolbarComponent","NgBoxService","NgBoxComponent","NgBoxDirective","EntityDataModule","GalleryDataService","StoreModule","EffectsModule","StoreDevtoolsModule","environment","metaReducers","reducers","GalleryEntityService","GalleryResolver","StoreRouterConnectingModule","SimpleGalleryDataService","SimpleGalleryEntityService","routes","path","component","resolve","entityMetadata","Gallery","entityDispatcherOptions","optimisticUpdate","SimpleGallery","AppModule","eds","entityDataService","galleryDataService","simpleGalleryDataService","registerMetadataMap","registerService","bootstrap","imports","forRoot","runtimeChecks","strictStateImmutability","strictActionImmutability","strictActionSerializability","strictStateSerializability","instrument","maxAge","logOnly","production","stateKey","routerState","declarations","observer","getBreadcrumbObserver","subscribe","data","crumbs","ngOnDestroy","unsubscribe","getLink","id","i","length","type","consts","filter","first","tap","galleryService","route","state","loaded$","pipe","loaded","factory","buttonClickService","subscription","notifyObservable$","name","addMode","reset","$","modal","setTimeout","select2","ajax","url","dataType","params","q","term","page","tags","gallery","description","useTags","showImages","combinedView","tagList","tag","push","onSubmit","tagData","galleryData","parentGallery","SubmitGallery","parent","options","message","container","duration","meow","children","remove","navigate","inputs","ctx","map","gallery$","entities$","find","getGalleriesObserver","galleries","doesThumbExist","thumbId","onEditClick","onAddGalleryClick","onAddImageClick","onDeleteClick","confirm","delete","parentId","dataService","parent_id","tag_list","parent_gallery","getGalleryObserver","trigger","imageService","files","uploadedFiles","file","hash","SubmitImages","gallery_id","fileHashes","onUpload","event","response","xhr","r","filename","fileDelete","$event","preventDefault","console","log","fileIndex","item","index","splice","image","val","image_src","format","imageFullUrl","getFullImageUrl","getImageObserver","thumbService","imagesObserver","getImagesObserver","images","checkThumbs","galleryObserver","imageWidths","totalWidth","thumbSub","undefined","toGenerate","isGenerating","parseInt","width","Number","TARGET_HEIGHT","height","getThumbs","maxWidth","GALLERY_WIDTH","rows","row","scaleFactor","j","displayWidth","Math","floor","displayHeight","getStatus","nextBatch","found","notDoneYet","DeleteImage","next","isNumeric","fromData","Array","isArray","ParentGallery","EventEmitter","ngBox","ngDoCheck","open","elementView","checkInterval","closeOutside","target","closeNgBox","t","setInterval","elementButtons","resize","current","loading","clearInterval","elementExist","currentWidth","calcPercent","window","innerWidth","currentHeight","innerHeight","realWidth","naturalWidth","realHeight","naturalHeight","min","maxHeight","ratio","style","offsetWidth","offsetHeight","checkKeyPress","keyCode","nextNgBox","previousNgBox","value","of","toString","search","getHasGroup","group","getCount","getCurrentIndex","currentGroup","e","indexOf","pos","isLoaded","viewQuery","sanitizer","removeImage","ngAfterViewInit","updateImage","src","href","getData","onClick","regExp","match","bypassSecurityTrustResourceUrl","title","cache","Image","hostBindings","galleryEntityService","simpleGalleryEntityService","simpleGalleries$","simpleGalleries","getAll","getByKey","page_data_service","GetHomePageData","GetImagePageData","routerReducer","logger","reducer","action","Subject","notify","asObservable","BehaviorSubject","http","pageData","breadcrumbs","getPageTitleObserver","page_title","EntityCollectionServiceBase","serviceElementsFactory","DefaultDataService","httpUrlGenerator","_gallery","api_url","subject","body","put","success","post","DeleteGallery","data_service","GetPageData","get","GetGalleryPageData","image_id","document","join","enableProdMode","__NgCli_bootstrap_1","bootstrapModule","catch","err"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}