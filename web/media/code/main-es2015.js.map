{"version":3,"file":"main-es2015.js","mappings":"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","sources":["./$_lazy_route_resources|lazy|groupOptions: {}|namespace object","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/breadcrumb/breadcrumb.component.ts","./src/app/breadcrumb/breadcrumb.component.html","./src/app/gallery.resolver.ts","./src/app/gallery/gallery-edit/gallery-edit.component.ts","./src/app/gallery/gallery-edit/gallery-edit.component.html","./src/app/gallery/gallery-info/gallery-info.component.ts","./src/app/gallery/gallery-info/gallery-info.component.html","./src/app/gallery/gallery-list/gallery-list.component.ts","./src/app/gallery/gallery-list/gallery-list.component.html","./src/app/gallery/gallery-tile/gallery-tile.component.ts","./src/app/gallery/gallery-tile/gallery-tile.component.html","./src/app/gallery/gallery-toolbar/gallery-toolbar.component.ts","./src/app/gallery/gallery-toolbar/gallery-toolbar.component.html","./src/app/home/home-toolbar/home-toolbar.component.ts","./src/app/home/home-toolbar/home-toolbar.component.html","./src/app/image/image-add/image-add.component.ts","./src/app/image/image-add/image-add.component.html","./src/app/image/image-edit/image-edit.component.ts","./src/app/image/image-edit/image-edit.component.html","./src/app/image/image-info/image-info.component.ts","./src/app/image/image-info/image-info.component.html","./src/app/image/image-list/image-list.component.ts","./src/app/image/image-list/image-list.component.html","./src/app/image/image-thumb/image-thumb.component.ts","./src/app/image/image-thumb/image-thumb.component.html","./src/app/image/image-toolbar/image-toolbar.component.ts","./src/app/image/image-toolbar/image-toolbar.component.html","./src/app/models/gallery.model.ts","./src/app/models/parent-gallery.model.ts","./src/app/ngbox/ngbox.component.ts","./src/app/ngbox/ngbox.directive.ts","./src/app/ngbox/ngbox.service.ts","./src/app/pages/gallery-page/gallery-page.component.ts","./src/app/pages/gallery-page/gallery-page.component.html","./src/app/pages/home-page/home-page.component.ts","./src/app/pages/home-page/home-page.component.html","./src/app/pages/image-page/image-page.component.ts","./src/app/pages/image-page/image-page.component.html","./src/app/reducers/index.ts","./src/app/services/button-click.service.ts","./src/app/services/data.service.ts","./src/app/services/gallery-entity.service.ts","./src/app/services/gallery.data.service.ts","./src/app/services/gallery_service.ts","./src/app/services/image_service.ts","./src/app/services/page_data.service.ts","./src/app/services/page_title.service.ts","./src/app/services/simple_gallery-entity.service.ts","./src/app/services/simple_gallery.data.service.ts","./src/app/services/thumbnail.service.ts","./src/environments/environment.ts","./src/main.ts"],"sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 8255;\nmodule.exports = webpackEmptyAsyncContext;","import {Component, ElementRef, OnInit} from '@angular/core';\nimport {DataService} from \"./services/data.service\";\nimport {Router} from \"@angular/router\";\nimport {PageTitleService} from \"./services/page_title.service\";\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit {\n    preload = {};\n    data = [];\n\n    constructor(private router: Router,\n                private service: DataService,\n                private pageTitleService: PageTitleService,\n                private elementRef:ElementRef) {\n        this.preload = JSON.parse(this.elementRef.nativeElement.getAttribute('[preload]'));\n    }\n\n    ngOnInit(): void {\n        this.service.setPageData(this.preload);\n    }\n}\n","<breadcrumb></breadcrumb>\n\n<router-outlet></router-outlet>","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\n\nimport { AppComponent } from './app.component';\nimport { BreadcrumbComponent } from './breadcrumb/breadcrumb.component';\nimport { GalleryListComponent } from './gallery/gallery-list/gallery-list.component';\nimport { GalleryTileComponent } from './gallery/gallery-tile/gallery-tile.component';\nimport { DataService } from \"./services/data.service\";\nimport { PageTitleService } from \"./services/page_title.service\";\nimport { PageDataService } from \"./services/page_data.service\";\nimport { HttpClientModule } from \"@angular/common/http\";\nimport { RouterModule, Routes } from \"@angular/router\";\nimport { GalleryPageComponent } from './pages/gallery-page/gallery-page.component';\nimport { HomePageComponent } from './pages/home-page/home-page.component';\nimport { GalleryInfoComponent } from './gallery/gallery-info/gallery-info.component';\nimport { ImageListComponent } from './image/image-list/image-list.component';\nimport { ImageThumbComponent } from './image/image-thumb/image-thumb.component';\nimport { GalleryToolbarComponent } from './gallery/gallery-toolbar/gallery-toolbar.component';\nimport { GalleryEditComponent } from './gallery/gallery-edit/gallery-edit.component';\nimport { ButtonClickService } from \"./services/button-click.service\";\nimport { FormsModule } from \"@angular/forms\";\nimport { GalleryService } from \"./services/gallery_service\";\nimport { ImageService } from \"./services/image_service\";\nimport { ImagePageComponent } from './pages/image-page/image-page.component';\nimport { ImageInfoComponent } from './image/image-info/image-info.component';\nimport { ImageToolbarComponent } from './image/image-toolbar/image-toolbar.component';\nimport { ImageEditComponent } from './image/image-edit/image-edit.component';\nimport { ThumbnailService } from \"./services/thumbnail.service\";\nimport { ImageAddComponent } from \"./image/image-add/image-add.component\";\nimport { FileUploadModule } from 'primeng/fileupload';\nimport { HomeToolbarComponent } from \"./home/home-toolbar/home-toolbar.component\";\nimport { NgBoxService } from \"./ngbox/ngbox.service\";\nimport { NgBoxComponent } from \"./ngbox/ngbox.component\";\nimport { NgBoxDirective } from \"./ngbox/ngbox.directive\";\nimport {EntityDataModule, EntityDataService, EntityDefinitionService, EntityDispatcherDefaultOptions, EntityMetadataMap} from '@ngrx/data';\nimport {GalleryDataService} from './services/gallery.data.service';\nimport {StoreModule} from '@ngrx/store';\nimport {EffectsModule} from '@ngrx/effects';\nimport {StoreDevtoolsModule} from '@ngrx/store-devtools';\nimport {environment} from '../environments/environment';\nimport {metaReducers, reducers} from './reducers';\nimport {GalleryEntityService} from './services/gallery-entity.service';\nimport {GalleryResolver} from './gallery.resolver';\nimport {RouterState, StoreRouterConnectingModule} from '@ngrx/router-store';\nimport {SimpleGalleryDataService} from './services/simple_gallery.data.service';\nimport {SimpleGalleryEntityService} from './services/simple_gallery-entity.service';\n\nconst routes: Routes = [\n\t{\n\t\tpath: '',\n\t\tcomponent: HomePageComponent\n\t},\n\t{\n\t\tpath: 'gallery/:id',\n\t\tcomponent: GalleryPageComponent,\n\t\tresolve: {\n\t\t\t//gallery: GalleryResolver\n\t\t}\n\t},\n\t{\n\t\tpath: 'image/:gallery_id/:image_id',\n\t\tcomponent: ImagePageComponent\n\t}\n];\n\nconst entityMetadata: EntityMetadataMap = {\n\tGallery: {\n\t\tentityDispatcherOptions: {\n\t\t\toptimisticUpdate: true\n\t\t}\n\t},\n\tSimpleGallery: {}\n};\n\n@NgModule({\n\tdeclarations: [\n\t\tAppComponent,\n\t\tBreadcrumbComponent,\n\n\t\tGalleryListComponent,\n\t\tGalleryTileComponent,\n\t\tGalleryInfoComponent,\n\t\tGalleryToolbarComponent,\n\t\tGalleryEditComponent,\n\n\t\tImageListComponent,\n\t\tImageThumbComponent,\n\t\tImageInfoComponent,\n\n\t\tHomeToolbarComponent,\n\n\t\t// Route pages\n\t\tHomePageComponent,\n\t\tGalleryPageComponent,\n\t\tImagePageComponent,\n\t\tImageToolbarComponent,\n\t\tImageEditComponent,\n\t\tImageAddComponent,\n\n\t\tNgBoxComponent,\n\t\tNgBoxDirective\n\t],\n\timports: [\n\t\tBrowserModule,\n\t\tHttpClientModule,\n\t\tRouterModule.forRoot(routes, { relativeLinkResolution: 'legacy' }),\n\t\tFormsModule,\n\t\tFileUploadModule,\n\t\tStoreModule.forRoot(reducers, {\n\t\t\tmetaReducers,\n\t\t\truntimeChecks : {\n\t\t\t\tstrictStateImmutability: true,\n\t\t\t\tstrictActionImmutability: true,\n\t\t\t\tstrictActionSerializability: true,\n\t\t\t\tstrictStateSerializability:true\n\t\t\t}\n\t\t}),\n\t\tStoreDevtoolsModule.instrument({maxAge: 25, logOnly: environment.production}),\n\t\tEffectsModule.forRoot(),\n\t\tEntityDataModule.forRoot({}),\n\t\tStoreRouterConnectingModule.forRoot({\n\t\t\tstateKey: 'router',\n\t\t\trouterState: RouterState.Minimal\n\t\t})\n\t],\n\tproviders: [\n\t\tDataService,\n\t\tPageTitleService,\n\t\tPageDataService,\n\t\tButtonClickService,\n\t\tGalleryService,\n\t\tImageService,\n\t\tThumbnailService,\n\t\tNgBoxService,\n\t\tGalleryDataService,\n\t\tGalleryEntityService,\n\t\tGalleryResolver,\n\t\tSimpleGalleryDataService,\n\t\tSimpleGalleryEntityService\n\t],\n\tbootstrap: [\n\t\tAppComponent\n\t]\n})\nexport class AppModule {\n\tconstructor(\n\t\tprivate eds: EntityDefinitionService,\n\t\tprivate entityDataService: EntityDataService,\n\t\tprivate galleryDataService: GalleryDataService,\n\t\tprivate simpleGalleryDataService: SimpleGalleryDataService\n\t) {\n\t\teds.registerMetadataMap(entityMetadata);\n\t\tentityDataService.registerService('Gallery', this.galleryDataService);\n\t\tentityDataService.registerService('SimpleGallery', this.simpleGalleryDataService);\n\t}\n}\n","import {Component, OnDestroy} from '@angular/core';\nimport {Breadcrumb} from \"../models/breadcrumb.model\";\nimport {DataService} from \"../services/data.service\";\nimport {Subscription} from \"rxjs/Subscription\";\n\n@Component({\n  selector: 'breadcrumb',\n  templateUrl: './breadcrumb.component.html',\n  styleUrls: ['./breadcrumb.component.css']\n})\nexport class BreadcrumbComponent implements OnDestroy {\n    crumbs: Breadcrumb[];\n    observer: Subscription;\n\n    constructor(private service: DataService){\n        this.observer = service.getBreadcrumbObserver().subscribe(\n            data => {\n                this.crumbs = data;\n            }\n        );\n    }\n\n    ngOnDestroy(): void {\n        this.observer.unsubscribe();\n    }\n\n    getLink(id) {\n        for (let i = 0; i < this.crumbs.length; i++) {\n            if (this.crumbs[i].id == id) {\n                return '/' + this.crumbs[i].type + '/' + this.crumbs[i].id;\n            }\n        }\n\n        return '/';\n    }\n}\n","<ol class=\"breadcrumb\">\n\t<li><a [routerLink]=\"['/']\">Home</a></li>\n\n\t<li *ngFor=\"let crumb of crumbs; let last = last\">\n\t  <a *ngIf=\"!last\"  [routerLink]=\"[getLink(crumb.id)]\">{{crumb.name}}</a>\n\t  <span *ngIf=\"last\">{{crumb.name}}</span>\n\t</li>\n</ol>\n","import {ActivatedRouteSnapshot, Resolve, RouterStateSnapshot} from '@angular/router';\nimport {Injectable} from '@angular/core';\nimport {Observable} from 'rxjs';\nimport {filter, first, tap} from 'rxjs/operators';\nimport {GalleryEntityService} from './services/gallery-entity.service';\n\n@Injectable()\nexport class GalleryResolver implements Resolve<boolean> {\n\n\tconstructor(private galleryService: GalleryEntityService) {\n\t}\n\n\tresolve(route: ActivatedRouteSnapshot,\n\t        state: RouterStateSnapshot): Observable<boolean> {\n\n\t\treturn this.galleryService.loaded$\n\t\t\t.pipe(\n\t\t\t\ttap(loaded => {\n\t\t\t\t\tif (!loaded) {\n\t\t\t\t\t\t//console.log(route, state)\n\t\t\t\t\t\t//this.galleryService.getAll()//ByKey(route.params.id);\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tfilter(loaded => !!loaded),\n\t\t\t\tfirst()\n\t\t\t);\n\t}\n}\n","import {Component, Input, OnDestroy} from '@angular/core';\nimport {ButtonClickService} from \"../../services/button-click.service\";\nimport {Subscription} from \"rxjs/Subscription\";\nimport {GalleryService} from \"../../services/gallery_service\";\nimport {Router} from \"@angular/router\";\nimport {Gallery} from '../../models/gallery.model';\n\ndeclare var $: any;\n\n@Component({\n  selector: 'gallery-edit',\n  templateUrl: './gallery-edit.component.html',\n  styleUrls: ['./gallery-edit.component.css']\n})\nexport class GalleryEditComponent implements OnDestroy {\n\n\tprivate subscription: Subscription;\n\n\t@Input() gallery: Gallery;\n\taddMode: boolean = false;\n\n\ttagList = [];\n\tname: String = '';\n\tdescription: String = '';\n\tuseTags: boolean = false;\n\tshowImages: boolean = false;\n\n\tconstructor(private buttonClickService: ButtonClickService,\n\t            private galleryService: GalleryService,\n\t            private router: Router) {\n\t\tthis.subscription = this.buttonClickService.notifyObservable$.subscribe(\n\t\t\tdata => {\n\t\t\t\tif ((data.name !== 'galleryEditClick') &&\n\t\t\t\t\t(data.name !== 'galleryAddClick'))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.addMode = data.name === 'galleryAddClick';\n\n\t\t\t\tthis.reset();\n\t\t\t\t$('#edit-modal').modal('show');\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t$('#inputGalleryParent').select2({\n\t\t\t\t\t\tajax: {\n\t\t\t\t\t\t\turl: '/api/gallery_lookup',\n\t\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\t\tdata: function (params) {\n\t\t\t\t\t\t\t\treturn  {\n\t\t\t\t\t\t\t\t\tq: params.term,\n\t\t\t\t\t\t\t\t\tpage: params.page || 1\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t$('#inputGalleryTags').select2({\n\t\t\t\t\t\ttags: true,\n\t\t\t\t\t\tajax: {\n\t\t\t\t\t\t\turl: '/api/tag_lookup',\n\t\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\t\tdata: function (params) {\n\t\t\t\t\t\t\t\treturn  {\n\t\t\t\t\t\t\t\t\tq: params.term,\n\t\t\t\t\t\t\t\t\tpage: params.page || 1\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t)\n\t}\n\n\treset() {\n\t\tif (!this.addMode) {\n\t\t\tthis.name = this.gallery.name;\n\t\t\tthis.description = this.gallery.description;\n\t\t\tthis.useTags = this.gallery.useTags;\n\t\t\tthis.showImages = this.gallery.combinedView;\n\t\t} else\n\t\t{\n\t\t\tthis.name = '';\n\t\t\tthis.description = '';\n\t\t\tthis.useTags = true;\n\t\t\tthis.showImages = false;\n\t\t}\n\t\tthis.tagList = [];\n\n\t\tfor (let tag of this.gallery.tagList) {\n\t\t\tthis.tagList.push({name: tag.name, id: ''+tag.id});\n\t\t}\n\t}\n\n\tonSubmit() {\n\t\t// Select2 isn't synchronising so we have to get the selections manually\n\t\tlet tagData = $('#inputGalleryTags').select2('data');\n\t\tlet tags = [];\n\t\tfor (let tag of tagData)\n\t\t{\n\t\t\ttags.push(tag.id);\n\t\t}\n\n\t\tlet galleryData = $('#inputGalleryParent').select2('data');\n\t\tthis.gallery.parentGallery.id = galleryData[0].id;\n\n\t\tlet id = 0;\n\t\tif (!this.addMode)\n\t\t\tid = this.gallery.id;\n\n\t\tthis.galleryService.SubmitGallery({\n\t\t\tid: id,\n\t\t\tname: this.name,\n\t\t\tdescription: this.description,\n\t\t\tparent: this.gallery.parentGallery.id,\n\t\t\ttags: tags,\n\t\t\tuseTags: this.useTags,\n\t\t\tshowImages: this.showImages\n\t\t}).subscribe(data => {\n\t\t\tlet options =\n\t\t\t{\n\t\t\t\tmessage: 'Gallery saved',\n\t\t\t\tcontainer: '#editSuccessContainer',\n\t\t\t\tduration: 5000\n\t\t\t};\n\t\t\t$.meow(options);\n\t\t\t$('#inputGalleryTags').children().remove();\n\t\t\t$('#edit-modal').modal('hide');\n\n\t\t\tif (this.addMode) {\n\t\t\t\tthis.router.navigate(['/gallery/' + data.message])\n\t\t\t}\n\t\t});\n\t}\n\n\tngOnDestroy(): void {\n\t\tthis.subscription.unsubscribe();\n\t}\n}\n","<div class=\"modal fade\" id=\"edit-modal\">\n\t<div class=\"modal-dialog\">\n\t\t<div class=\"modal-content\">\n\t\t\t<div class=\"modal-header\">\n\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\n\t\t\t\t<h4 class=\"modal-title\">Edit gallery</h4>\n\t\t\t</div>\n\t\t\t<form action=\"/gallery/{{gallery.id}}\" method=\"post\" class=\"form-horizontal\">\n\t\t\t\t<div class=\"modal-body\">\n\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label for=\"inputGalleryName\" class=\"col-sm-2 control-label\">Name</label>\n\t\t\t\t\t\t<div class=\"col-sm-10\">\n\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" name=\"inputGalleryName\" id=\"inputGalleryName\" placeholder=\"Edit...\" [(ngModel)]=\"name\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label for=\"inputGalleryDescription\" class=\"col-sm-2 control-label\">Description</label>\n\t\t\t\t\t\t<div class=\"col-sm-10\">\n\t\t\t\t\t\t\t<textarea class=\"form-control\" name=\"inputGalleryDescription\" id=\"inputGalleryDescription\" placeholder=\"Edit...\" [(ngModel)]=\"description\"></textarea>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label for=\"inputGalleryParent\" class=\"col-sm-2 control-label\">Parent</label>\n\t\t\t\t\t\t<div class=\"col-sm-10\">\n\t\t\t\t\t\t\t<select class=\"form-control\" name=\"inputGalleryParent\" id=\"inputGalleryParent\" style=\"width: 100%\" *ngIf=\"gallery.parentGallery !== undefined\">\n\t\t\t\t\t\t\t\t<option value=\"{{gallery.parentGallery.id}}\" selected=\"selected\">{{gallery.parentGallery.name}}</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label for=\"inputGalleryTags\" class=\"col-sm-2 control-label\">Tags</label>\n\t\t\t\t\t\t<div class=\"col-sm-10\">\n\t\t\t\t\t\t\t<select class=\"form-control\" name=\"inputGalleryTags[]\" id=\"inputGalleryTags\" style=\"width: 100%\" multiple>\n\t\t\t\t\t\t\t\t<option *ngFor=\"let tag of tagList\" value=\"{{tag.id}}\" selected=\"selected\">{{tag.name}}</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<div class=\"checkbox\">\n\t\t\t\t\t\t\t<div class=\"col-sm-2\"></div>\n\t\t\t\t\t\t\t<div class=\"col-sm-10\">\n\t\t\t\t\t\t\t\t<input type=\"checkbox\" name=\"inputGalleryCombinedView\" id=\"inputGalleryCombinedView\" [(ngModel)]=\"showImages\">\n\t\t\t\t\t\t\t\t<label for=\"inputGalleryCombinedView\" class=\"control-label\">Show images when there are subgalleries</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<div class=\"checkbox\">\n\t\t\t\t\t\t\t<div class=\"col-sm-2\"></div>\n\t\t\t\t\t\t\t<div class=\"col-sm-10\">\n\t\t\t\t\t\t\t\t<input type=\"checkbox\" name=\"inputGalleryUseTags\" id=\"inputGalleryUseTags\" [(ngModel)]=\"useTags\">\n\t\t\t\t\t\t\t\t<label for=\"inputGalleryUseTags\" class=\"control-label\">Populate from tags</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"modal-footer\">\n\t\t\t\t\t<button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n\t\t\t\t\t<input (click)=\"onSubmit()\" type=\"submit\" class=\"btn btn-primary\" value=\"Save changes\">\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</div><!-- /.modal-content -->\n\t</div><!-- /.modal-dialog -->\n</div><!-- /.modal -->\n","import {Component} from '@angular/core';\nimport {GalleryEntityService} from '../../services/gallery-entity.service';\nimport {Observable} from 'rxjs';\nimport {Gallery} from '../../models/gallery';\nimport {map} from 'rxjs/operators';\n\n@Component({\n  selector: 'gallery-info',\n  templateUrl: './gallery-info.component.html',\n  styleUrls: ['./gallery-info.component.css']\n})\nexport class GalleryInfoComponent {\n\n\tpublic gallery$: Observable<Gallery>\n\tconstructor(private galleryService: GalleryEntityService) {\n\t}\n\n\tprivate ngOnInit() {\n\t\tthis.gallery$ = this.galleryService.entities$\n\t\t\t.pipe(\n\t\t\t\tmap(gallery => gallery.find(gallery => gallery.id == 32))\n\t\t\t);\n\t}\n}\n","<div *ngIf=\"(gallery$ | async) as gallery\">\n\t<h1>{{gallery.name}}</h1>\n\t<p>\n\t\t{{gallery.description}}\n\t</p>\n</div>\n","import {Component} from '@angular/core';\nimport {Gallery} from \"../../models/gallery.model\";\nimport {DataService} from \"../../services/data.service\";\nimport {Subscription} from \"rxjs/Subscription\";\n\n@Component({\n  selector: 'gallery-list',\n  templateUrl: './gallery-list.component.html',\n  styleUrls: ['./gallery-list.component.css']\n})\nexport class GalleryListComponent {\n\n    galleries: Gallery[];\n    observer: Subscription;\n\n    constructor(private service: DataService) {\n        this.observer = service.getGalleriesObserver().subscribe(\n            data => {\n                this.galleries = data;\n            }\n        );\n    }\n\n    ngOnDestroy(): void {\n        this.observer.unsubscribe();\n    }\n}\n","<div class=\"row\">\n\t<ul class=\"list-unstyled\">\n\t\t<li *ngFor=\"let gallery of galleries\" class=\"thumbnail col-md-3\" style=\"min-height: 150px;\">\n\t\t\t<gallery-tile [gallery]=\"gallery\"></gallery-tile>\n\t\t</li>\n\t</ul>\n</div>","import { Component, Input } from '@angular/core';\nimport {Gallery} from \"../../models/gallery.model\";\n\n@Component({\n  selector: 'gallery-tile',\n  templateUrl: './gallery-tile.component.html',\n  styleUrls: ['./gallery-tile.component.css']\n})\nexport class GalleryTileComponent {\n\n    @Input() gallery: Gallery;\n\n    constructor() { }\n    getLink(id) {\n        return '/gallery/' + this.gallery.id;\n    }\n\n\tdoesThumbExist(thumbId: number) {\n    \treturn thumbId !== null;\n\t}\n}\n","<a [routerLink]=\"[getLink(gallery.id)]\">\n\t<img *ngIf=\"!doesThumbExist(gallery.thumbId)\" src=\"http://placehold.it/300x200\">\n\t<img *ngIf=\"doesThumbExist(gallery.thumbId)\" src=\"/image/thumb/{{gallery.thumbId}}.jpg\">\n\t<h4>{{gallery.name}}</h4>\n</a>\n","import {Component, Input} from '@angular/core';\nimport {DataService} from \"../../services/data.service\";\nimport {ButtonClickService} from \"../../services/button-click.service\";\nimport {GalleryService} from \"../../services/gallery_service\";\nimport {Router} from \"@angular/router\";\nimport {Gallery} from '../../models/gallery';\nimport {GalleryEntityService} from '../../services/gallery-entity.service';\nimport {map, tap} from 'rxjs/operators';\nimport {Observable} from 'rxjs';\n\ndeclare var $: any;\n\n@Component({\n  selector: 'gallery-toolbar',\n  templateUrl: './gallery-toolbar.component.html',\n  styleUrls: ['./gallery-toolbar.component.css']\n})\nexport class GalleryToolbarComponent {\n\n\t@Input() gallery: Gallery;\n\tpublic gallery$: Observable<Gallery>;\n\n\tconstructor(private galleryService: GalleryEntityService,\n\t            private router: Router) {\n\t}\n\n\tprivate ngOnInit() {\n\t\tthis.gallery$ = this.galleryService.entities$\n\t\t\t.pipe(\n\t\t\t\tmap(gallery => gallery.find(gallery => gallery.id == 32))\n\t\t\t);\n\t}\n\n\tonEditClick() {\n\t\t//this.buttonClickService.trigger('galleryEditClick');\n\t}\n\n\tonAddGalleryClick() {\n\t\t//this.buttonClickService.trigger('galleryAddClick');\n\t}\n\n\tonAddImageClick() {\n\t\t//this.buttonClickService.trigger('imageAddClick');\n\t}\n\n\tonDeleteClick() {\n\t\tif (confirm('Delete this gallery?')) {\n\t\t\tthis.galleryService.delete(this.gallery)\n\t\t\t\t.pipe(\n\t\t\t\t\ttap(gallery => {\n\t\t\t\t\t\tlet options =\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmessage: 'Gallery deleted',\n\t\t\t\t\t\t\t\tcontainer: '#editSuccessContainer',\n\t\t\t\t\t\t\t\tduration: 5000\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t$.meow(options);\n\n\t\t\t\t\t\tif (this.gallery.parentId > 0)\n\t\t\t\t\t\t\tthis.router.navigate(['/gallery/' + this.gallery.parentId]);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tthis.router.navigate(['/']);\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t}\n\t}\n}\n","<gallery-edit [gallery]=\"gallery\"></gallery-edit>\n<image-add [gallery]=\"gallery\"></image-add>\n\n<div class=\"row\">\n\t<div class=\"pull-right\">\n\t\t<div class=\"btn-group\" role=\"group\" aria-label=\"...\">\n\t\t\t<button type=\"button\" (click)=\"onAddGalleryClick()\" class=\"btn btn-default\" id=\"galleryAdd\" title=\"Add gallery\" data-toggle=\"tooltip\"><span class=\"glyphicon glyphicon-th\"></span></button>\n\t\t\t<button type=\"button\" (click)=\"onAddImageClick()\" class=\"btn btn-default\" id=\"imageAdd\" title=\"Add image\" data-toggle=\"tooltip\"><span class=\"glyphicon glyphicon-picture\"></span></button>\n\t\t\t<button type=\"button\" (click)=\"onEditClick()\" class=\"btn btn-default\" id=\"galleryEdit\" title=\"Edit gallery\" data-toggle=\"tooltip\"><span class=\"glyphicon glyphicon-pencil\"></span></button>\n\t\t\t<button type=\"button\" (click)=\"onDeleteClick()\" class=\"btn btn-default\" id=\"galleryDelete\" title=\"Delete gallery\" data-toggle=\"tooltip\"><span class=\"glyphicon glyphicon-trash\"></span></button>\n\t\t</div>\n\t</div>\n</div>\n","import {Component, OnDestroy} from '@angular/core';\nimport {DataService} from \"../../services/data.service\";\nimport {Subscription} from \"rxjs/Subscription\";\nimport {ButtonClickService} from \"../../services/button-click.service\";\nimport {GalleryService} from \"../../services/gallery_service\";\nimport {Router} from \"@angular/router\";\n\ndeclare var $: any;\n\n@Component({\n  selector: 'home-toolbar',\n  templateUrl: './home-toolbar.component.html',\n  styleUrls: ['./home-toolbar.component.css']\n})\nexport class HomeToolbarComponent implements OnDestroy {\n\n\tgallery = {\n\t\tid: 0,\n\t\tparent_id: 0,\n\t\tname: '',\n\t\tdescription: '',\n\t\ttag_list: [],\n\t\tparent_gallery: {\n\t\t\tid: 0,\n\t\t\tname: 'Homepage'\n\t\t}\n\t};\n\tobserver: Subscription;\n\n\tconstructor(private dataService: DataService,\n\t            private buttonClickService: ButtonClickService,\n\t            private galleryService: GalleryService,\n\t            private router: Router) {\n\t\tthis.observer = dataService.getGalleryObserver().subscribe(\n\t\t\tdata => {\n\t\t\t\tthis.gallery = data;\n\t\t\t}\n\t\t);\n\t}\n\n\tonAddGalleryClick() {\n\t\tthis.buttonClickService.trigger('galleryAddClick');\n\t}\n\n\tngOnDestroy() {\n\t\tthis.observer.unsubscribe();\n\t}\n}\n","<gallery-edit [gallery]=\"gallery\"></gallery-edit>\n\n<div class=\"row\">\n\t<div class=\"pull-right\">\n\t\t<div class=\"btn-group\" role=\"group\" aria-label=\"...\">\n\t\t\t<button type=\"button\" (click)=\"onAddGalleryClick()\" class=\"btn btn-default\" id=\"galleryAdd\" title=\"Add gallery\" data-toggle=\"tooltip\"><span class=\"glyphicon glyphicon-th\"></span></button>\n\t\t</div>\n\t</div>\n</div>","import {Component, Input, OnInit} from '@angular/core';\nimport {ButtonClickService} from \"../../services/button-click.service\";\nimport {Subscription} from \"rxjs/Subscription\";\nimport {Router} from \"@angular/router\";\nimport {ImageService} from \"../../services/image_service\";\n\ndeclare var $: any;\n\n@Component({\n  selector: 'image-add',\n  templateUrl: './image-add.component.html',\n  styleUrls: ['./image-add.component.css']\n})\nexport class ImageAddComponent implements OnInit {\n\n\tprivate subscription: Subscription;\n\n\t@Input() gallery;\n\n\tfile;\n\tfilename: String = '';\n\tdescription: String = '';\n\ttagList = [];\n\n\tuploadedFiles: any[] = [];\n\n\tconstructor(private buttonClickService: ButtonClickService,\n\t            private imageService: ImageService,\n\t            private router: Router) {\n\t\tthis.subscription = this.buttonClickService.notifyObservable$.subscribe(\n\t\t\tdata => {\n\t\t\t\tif (data.name !== 'imageAddClick')\n\t\t\t\t\treturn;\n\n\t\t\t\tthis.reset();\n\t\t\t\t$('#add-modal').modal('show');\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t$('#inputImageTags').select2({\n\t\t\t\t\t\ttags: true,\n\t\t\t\t\t\tajax: {\n\t\t\t\t\t\t\turl: '/api/tag_lookup',\n\t\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\t\tdata: function (params) {\n\t\t\t\t\t\t\t\treturn  {\n\t\t\t\t\t\t\t\t\tq: params.term,\n\t\t\t\t\t\t\t\t\tpage: params.page || 1\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t)\n\t}\n\n\treset() {\n\t\tthis.description = '';\n\t\tthis.tagList = [];\n\n\t\tfor (let tag of this.gallery.tag_list) {\n\t\t\tthis.tagList.push({name: tag.name, id: ''+tag.id});\n\t\t}\n\t}\n\n\tonSubmit() {\n\t\t// Select2 isn't synchronising so we have to get the selections manually\n\t\tlet tagData = $('#inputImageTags').select2('data');\n\t\tlet tags = [];\n\t\tfor (let tag of tagData)\n\t\t{\n\t\t\ttags.push(tag.id);\n\t\t}\n\n\t\tlet files = this.uploadedFiles.map((file) => {\n\t\t\treturn file.hash\n\t\t});\n\n\t\tthis.imageService.SubmitImages({\n\t\t\tid: 0,\n\t\t\tgallery_id: this.gallery.id,\n\t\t\tdescription: this.description,\n\t\t\ttags: tags,\n\t\t\tfileHashes: files\n\t\t}).subscribe(data => {\n\t\t\tlet options =\n\t\t\t\t{\n\t\t\t\t\tmessage: 'Image saved',\n\t\t\t\t\tcontainer: '#editSuccessContainer',\n\t\t\t\t\tduration: 5000\n\t\t\t\t};\n\t\t\t$.meow(options);\n\t\t\t$('#inputImageTags').children().remove();\n\t\t\t$('#add-modal').modal('hide');\n\n\t\t\tif (files.length === 1)\n\t\t\t\tthis.router.navigate(['/image/' + this.gallery.id + '/' + data.message]);\n\t\t});\n\t}\n\n\tngOnInit() {\n\t}\n\n\tonUpload(event) {\n\t\tlet response = JSON.parse(event.xhr.response);\n\n\t\tfor (let file of event.files) {\n\t\t\tlet hash = '';\n\n\t\t\tfor (let r of response) {\n\t\t\t\tif (r.filename === file.name)\n\t\t\t\t\thash = r.hash;\n\t\t\t}\n\n\t\t\tfile.hash = hash;\n\t\t\tthis.uploadedFiles.push(file);\n\t\t}\n\t}\n\n\tfileDelete($event, file) {\n\t\t$event.preventDefault();\n\t\tconsole.log(file);\n\t\tlet fileIndex = -1;\n\t\tfor (let {item, index} of this.uploadedFiles.map((item, index) => ({ item, index })))\n\t\t{\n\t\t\tif (item.hash === file.hash)\n\t\t\t\tfileIndex = index;\n\t\t}\n\n\t\tif (fileIndex > -1)\n\t\t\tthis.uploadedFiles.splice(fileIndex, 1);\n\t}\n}\n","<div class=\"modal fade\" id=\"add-modal\">\n\t<div class=\"modal-dialog\">\n\t\t<div class=\"modal-content\">\n\t\t\t<div class=\"modal-header\">\n\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\n\t\t\t\t<h4 class=\"modal-title\">Add image</h4>\n\t\t\t</div>\n\t\t\t<form action=\"\" method=\"post\" class=\"form-horizontal\">\n\t\t\t\t<div class=\"modal-body\">\n\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label for=\"inputImageDescription\" class=\"col-sm-2 control-label\">Description</label>\n\t\t\t\t\t\t<div class=\"col-sm-10\">\n\t\t\t\t\t\t\t<textarea class=\"form-control\" name=\"inputImageDescription\" id=\"inputImageDescription\" placeholder=\"Edit...\" [(ngModel)]=\"description\"></textarea>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label for=\"inputImageTags\" class=\"col-sm-2 control-label\">Tags</label>\n\t\t\t\t\t\t<div class=\"col-sm-10\">\n\t\t\t\t\t\t\t<select class=\"form-control\" name=\"inputImageTags[]\" id=\"inputImageTags\" style=\"width: 100%\" multiple>\n\t\t\t\t\t\t\t\t<option *ngFor=\"let tag of tagList\" value=\"{{tag.id}}\" selected=\"selected\">{{tag.name}}</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label for=\"inputImageTags\" class=\"col-sm-2 control-label\">Image</label>\n\t\t\t\t\t\t<div class=\"col-sm-10\">\n\t\t\t\t\t\t\t<p-fileUpload url=\"/api/upload\" name=\"myfile[]\" accept=\"image/*\" auto=\"auto\" (onUpload)=\"onUpload($event)\" multiple=\"multiple\">\n\t\t\t\t\t\t\t\t<ng-template pTemplate=\"content\">\n\t\t\t\t\t\t\t\t\t<ul *ngIf=\"uploadedFiles.length\" class=\"list-unstyled uploaded-image-list\">\n\t\t\t\t\t\t\t\t\t\t<li *ngFor=\"let file of uploadedFiles\">\n\t\t\t\t\t\t\t\t\t\t\t<img width=\"50\" src=\"/image/uploaded/{{file.hash}}\">\n\t\t\t\t\t\t\t\t\t\t\t{{file.name}} - {{file.size}} bytes\n\t\t\t\t\t\t\t\t\t\t\t<a href=\"#\" (click)=\"fileDelete($event, file)\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"glyphicon glyphicon-trash\"></span>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t</ng-template>\n\t\t\t\t\t\t\t</p-fileUpload>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"modal-footer\">\n\t\t\t\t\t<button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n\t\t\t\t\t<input (click)=\"onSubmit()\" type=\"submit\" class=\"btn btn-primary\" value=\"Save changes\">\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</div><!-- /.modal-content -->\n\t</div><!-- /.modal-dialog -->\n</div><!-- /.modal -->\n","import {Component, Input, OnInit} from '@angular/core';\nimport {ButtonClickService} from \"../../services/button-click.service\";\nimport {Subscription} from \"rxjs/Subscription\";\nimport {Router} from \"@angular/router\";\nimport {ImageService} from \"../../services/image_service\";\n\ndeclare var $: any;\n\n@Component({\n  selector: 'image-edit',\n  templateUrl: './image-edit.component.html',\n  styleUrls: ['./image-edit.component.css']\n})\nexport class ImageEditComponent implements OnInit {\n\n\tprivate subscription: Subscription;\n\n\t@Input() image;\n\n\tid: String = '0';\n\ttagList = [];\n\tdescription: String = '';\n\n\tconstructor(private buttonClickService: ButtonClickService,\n\t            private imageService: ImageService,\n\t            private router: Router) {\n\t\tthis.subscription = this.buttonClickService.notifyObservable$.subscribe(\n\t\t\tdata => {\n\t\t\t\tif (data.name !== 'imageEditClick')\n\t\t\t\t\treturn;\n\n\t\t\t\tthis.reset();\n\t\t\t\t$('#edit-modal').modal('show');\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t$('#inputImageTags').select2({\n\t\t\t\t\t\ttags: true,\n\t\t\t\t\t\tajax: {\n\t\t\t\t\t\t\turl: '/api/tag_lookup',\n\t\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\t\tdata: function (params) {\n\t\t\t\t\t\t\t\treturn  {\n\t\t\t\t\t\t\t\t\tq: params.term,\n\t\t\t\t\t\t\t\t\tpage: params.page || 1\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t)\n\t}\n\n\treset() {\n\t\tthis.id = ''+this.image.id;\n\t\tthis.description = this.image.description;\n\t\tthis.tagList = [];\n\n\t\tlet tags = [];\n\t\tfor (let tag of this.image.tag_list) {\n\t\t\tthis.tagList.push({name: tag.name, id: ''+tag.id});\n\t\t\ttags.push(''+tag.id);\n\t\t}\n\t\t$('#inputImageTags').val(tags);\n\t}\n\n\tonSubmit() {\n\t\t// Select2 isn't synchronising so we have to get the selections manually\n\t\tlet tagData = $('#inputImageTags').select2('data');\n\t\tlet tags = [];\n\t\tfor (let tag of tagData)\n\t\t{\n\t\t\ttags.push(tag.id);\n\t\t}\n\n\t\tthis.imageService.SubmitImages({\n\t\t\tid: this.image.id,\n\t\t\tgallery_id: this.image.gallery_id,\n\t\t\tdescription: this.description,\n\t\t\ttags: tags,\n\t\t}).subscribe(data => {\n\t\t\tlet options =\n\t\t\t\t{\n\t\t\t\t\tmessage: 'Image saved',\n\t\t\t\t\tcontainer: '#editSuccessContainer',\n\t\t\t\t\tduration: 5000\n\t\t\t\t};\n\t\t\t$.meow(options);\n\t\t\t$('#inputImageTags').children().remove();\n\t\t\t$('#edit-modal').modal('hide');\n\t\t});\n\t}\n\n\tngOnInit() {\n\t}\n\n}\n","<div class=\"modal fade\" id=\"edit-modal\">\n\t<div class=\"modal-dialog\">\n\t\t<div class=\"modal-content\">\n\t\t\t<div class=\"modal-header\">\n\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\n\t\t\t\t<h4 class=\"modal-title\">Edit image</h4>\n\t\t\t</div>\n\t\t\t<form action=\"\" method=\"post\" class=\"form-horizontal\">\n\t\t\t\t<div class=\"modal-body\">\n\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label for=\"inputImageDescription\" class=\"col-sm-2 control-label\">Description</label>\n\t\t\t\t\t\t<div class=\"col-sm-10\">\n\t\t\t\t\t\t\t<textarea class=\"form-control\" name=\"inputImageDescription\" id=\"inputImageDescription\" placeholder=\"Edit...\" [(ngModel)]=\"description\"></textarea>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label for=\"inputImageTags\" class=\"col-sm-2 control-label\">Tags</label>\n\t\t\t\t\t\t<div class=\"col-sm-10\">\n\t\t\t\t\t\t\t<select class=\"form-control\" name=\"inputImageTags[]\" id=\"inputImageTags\" style=\"width: 100%\" multiple>\n\t\t\t\t\t\t\t\t<option *ngFor=\"let tag of tagList\" value=\"{{tag.id}}\" selected=\"selected\">{{tag.name}}</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"modal-footer\">\n\t\t\t\t\t<button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n\t\t\t\t\t<input (click)=\"onSubmit()\" type=\"submit\" class=\"btn btn-primary\" value=\"Save changes\">\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</div><!-- /.modal-content -->\n\t</div><!-- /.modal-dialog -->\n</div><!-- /.modal -->\n","import { Component, OnDestroy } from '@angular/core';\nimport {DataService} from \"../../services/data.service\";\nimport {Subscription} from \"rxjs/Subscription\";\nimport {NgBoxService} from \"../../ngbox/ngbox.service\";\n\n@Component({\n  selector: 'image-info',\n  templateUrl: './image-info.component.html',\n  styleUrls: ['./image-info.component.css']\n})\nexport class ImageInfoComponent implements OnDestroy {\n\n\timage = {\n\t\tid: 0,\n\t\timage_src: '',\n\t\tdescription: '',\n\t\tformat: 'jpg',\n\t\tfilename: ''\n\t};\n\tobserver: Subscription;\n\timageFullUrl: string;\n\n\tconstructor(private service: DataService) {\n\t\tthis.imageFullUrl = this.getFullImageUrl();\n\t\tthis.observer = service.getImageObserver().subscribe(\n\t\t\tdata => {\n\t\t\t\tthis.image = data;\n\t\t\t\tthis.imageFullUrl = this.getFullImageUrl();\n\t\t\t}\n\t\t);\n\t}\n\n\tngOnDestroy() {\n\t\tthis.observer.unsubscribe();\n\t}\n\n\tgetFullImageUrl() {\n\t\treturn '/image/' + this.image.id + '/' + this.image.filename;\n\t}\n}\n","<div class=\"moa-page\">\n\t<p>\n\t\t{{image.description}}\n\t</p>\n\t<div class=\"image-container\">\n\t\t<a [href]=\"getFullImageUrl()\" ng-box [title]=\"image.filename\" class=\"image-lightbox-link\">\n\t\t\t<img src=\"{{image.image_src}}\">\n\t\t</a>\n\t</div>\n\t<br>\n\t<div class=\"row\">\n\t\t<a [href]=\"getFullImageUrl()\" target=\"_blank\" class=\"btn btn-info col-md-2 col-md-offset-5\">\n\t\t\t<span class=\"glyphicon glyphicon-new-window pull-left\"></span> Open in new tab\n\t\t</a>\n\t</div>\n</div>\n<ngbox></ngbox>","import {Component, OnInit, OnDestroy} from '@angular/core';\nimport {Subscription} from \"rxjs/Subscription\";\nimport {DataService} from \"../../services/data.service\";\nimport {ThumbnailService} from \"../../services/thumbnail.service\";\n\n@Component({\n  selector: 'image-list',\n  templateUrl: './image-list.component.html',\n  styleUrls: ['./image-list.component.css']\n})\nexport class ImageListComponent implements OnInit, OnDestroy {\n\n\tstatic readonly TARGET_HEIGHT: Number = 300;\n\tstatic readonly GALLERY_WIDTH: Number = 1140;\n\n\timages: Array<any>;\n\tgallery: Array<any>;\n\timagesObserver: Subscription;\n\tgalleryObserver: Subscription;\n\tthumbSub: Subscription;\n\n\tconstructor(private service: DataService,\n\t            private thumbService: ThumbnailService) {\n\t\tthis.imagesObserver = service.getImagesObserver().subscribe(\n\t\t\tdata => {\n\t\t\t\tthis.images = data;\n\t\t\t\tthis.checkThumbs();\n\t\t\t}\n\t\t);\n\n\t\tthis.galleryObserver = service.getGalleryObserver().subscribe(\n\t\t\tdata => {\n\t\t\t\tthis.gallery = data;\n\t\t\t}\n\t\t);\n\t}\n\n\tngOnInit() {\n\t\tthis.checkThumbs();\n\t}\n\n\tprivate checkThumbs() {\n\t\tlet imageWidths = [];\n\t\tlet totalWidth = 0;\n\n\t\tif (this.thumbSub !== undefined)\n\t\t\tthis.thumbSub.unsubscribe();\n\n\t\tlet toGenerate = [];\n\t\tif (this.images !== undefined) {\n\t\t\tfor (let image of this.images) {\n\t\t\t\tif (image.isGenerating) {\n\t\t\t\t\ttoGenerate.push(parseInt(image.id));\n\t\t\t\t}\n\n\t\t\t\tlet width = image.width * (Number(ImageListComponent.TARGET_HEIGHT) / image.height);\n\t\t\t\timageWidths.push(width);\n\t\t\t\ttotalWidth += width;\n\t\t\t}\n\n\t\t\tif (toGenerate.length > 0)\n\t\t\t\tthis.getThumbs(toGenerate);\n\n\t\t\tlet maxWidth = Number(ImageListComponent.GALLERY_WIDTH) * 1.2;\n\n\t\t\tlet rows = [];\n\t\t\tlet row = {\n\t\t\t\twidth: 0,\n\t\t\t\timages: 0\n\t\t\t};\n\t\t\tlet i = 0;\n\t\t\twhile (i < imageWidths.length) {\n\t\t\t\trow.width += imageWidths[i];\n\t\t\t\trow.images++;\n\t\t\t\tif ((row.width > ImageListComponent.GALLERY_WIDTH) &&\n\t\t\t\t\t(row.images > 1)) {\n\t\t\t\t\tif (row.width > maxWidth) {\n\t\t\t\t\t\trow.width -= imageWidths[i];\n\t\t\t\t\t\trow.images--;\n\t\t\t\t\t\trows.push(row);\n\t\t\t\t\t\trow = {\n\t\t\t\t\t\t\twidth: imageWidths[i],\n\t\t\t\t\t\t\timages: 1\n\t\t\t\t\t\t};\n\t\t\t\t\t} else {\n\t\t\t\t\t\trows.push(row);\n\t\t\t\t\t\trow = {\n\t\t\t\t\t\t\twidth: 0,\n\t\t\t\t\t\t\timages: 0\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ti++;\n\t\t\t}\n\t\t\tif ((row.images === 1) &&\n\t\t\t\t(rows.length > 0)){\n\t\t\t\trows[rows.length-1].images++;\n\t\t\t\trows[rows.length-1].width += row.width;\n\t\t\t\trow = {\n\t\t\t\t\twidth: 0,\n\t\t\t\t\timages: 0\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ((row.images > 1) ||\n\t\t\t\t(rows.length === 0)) {\n\t\t\t\trows.push(row);\n\t\t\t}\n\n\t\t\ti = 0;\n\t\t\tfor (let row of rows) {\n\t\t\t\tlet scaleFactor = Number(ImageListComponent.GALLERY_WIDTH) / row.width;\n\t\t\t\tfor (let j = 0; j < row.images; j++) {\n\t\t\t\t\tthis.images[i].displayWidth = Math.floor(imageWidths[i] * scaleFactor);\n\t\t\t\t\tthis.images[i].displayHeight = Math.floor   (Number(ImageListComponent.TARGET_HEIGHT) * scaleFactor);\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate getThumbs(toGenerate: Array<number>) {\n\t\tthis.thumbSub = this.thumbService.getStatus(toGenerate).subscribe(data => {\n\t\t\tlet nextBatch = [];\n\t\t\tfor (let image of toGenerate) {\n\t\t\t\tlet found: boolean = false;\n\t\t\t\tfor (let notDoneYet of data) {\n\t\t\t\t\tif (image == notDoneYet)\n\t\t\t\t\t\tfound = true;\n\t\t\t\t}\n\n\t\t\t\tif (!found) {\n\t\t\t\t\tfor (let i of this.images) {\n\t\t\t\t\t\tif (image == i.id)\n\t\t\t\t\t\t\ti.isGenerating = false;\n\t\t\t\t\t}\n\t\t\t\t} else\n\t\t\t\t{\n\t\t\t\t\tnextBatch.push(image);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.thumbSub.unsubscribe();\n\n\t\t\tif (nextBatch.length > 0) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.getThumbs(nextBatch);\n\t\t\t\t}, 200);\n\t\t\t}\n\t\t});\n\t}\n\n\tngOnDestroy() {\n\t\tthis.imagesObserver.unsubscribe();\n\t\tthis.galleryObserver.unsubscribe();\n\t}\n}\n","<ul class=\"list-unstyled\">\n\t<li *ngFor=\"let image of images\" class=\"thumbnail\">\n\t\t<image-thumb [image]=\"image\" [gallery_id]=\"gallery.id\">\n\t\t</image-thumb>\n\t</li>\n</ul>\n","import {Component, Input} from '@angular/core';\n\n@Component({\n  selector: 'image-thumb',\n  templateUrl: './image-thumb.component.html',\n  styleUrls: ['./image-thumb.component.css']\n})\nexport class ImageThumbComponent {\n\n\t@Input() image: any;\n\t@Input() gallery_id: any;\n\n\tconstructor() { }\n\tgetLink() {\n\t\treturn '/image/' + this.gallery_id + '/' + this.image.id;\n\t}\n\n}\n","<div>\n\t<a [routerLink]=\"[getLink()]\">\n\t\t<img *ngIf=\"!image.isGenerating && image.displayWidth <= 450 && image.displayHeight <= 300\" src=\"/image/thumb/{{image.id}}.jpg\" [ngStyle]=\"{width: (image.displayWidth - 10) + 'px', height: image.displayHeight + 'px'}\">\n\t\t<img *ngIf=\"!image.isGenerating && (image.displayWidth > 450 || image.displayHeight > 300)\" src=\"/image/thumb/{{image.id}}-w.jpg\" [ngStyle]=\"{width: (image.displayWidth - 10) + 'px', height: image.displayHeight + 'px'}\">\n\t\t<img *ngIf=\"image.isGenerating\" src=\"/media/spinner.svg\" class=\"thumbnail-generating\">\n\t\t<span>{{image.filename}}</span>\n\t</a>\n</div>\n","import { Component, OnDestroy } from '@angular/core';\nimport {ButtonClickService} from \"../../services/button-click.service\";\nimport {DataService} from \"../../services/data.service\";\nimport {Subscription} from \"rxjs/Subscription\";\nimport {Router} from \"@angular/router\";\nimport {ImageService} from \"../../services/image_service\";\n\ndeclare var $: any;\n\n@Component({\n  selector: 'image-toolbar',\n  templateUrl: './image-toolbar.component.html',\n  styleUrls: ['./image-toolbar.component.css']\n})\nexport class ImageToolbarComponent implements OnDestroy {\n\n\timage = {\n\t\tid: 0,\n\t\tname: '',\n\t\tdescription: '',\n\t\tgallery_id: 0\n\t};\n\tobserver: Subscription;\n\n\tconstructor(private dataService: DataService,\n\t\t\t\tprivate buttonClickService: ButtonClickService,\n\t\t\t\tprivate imageService: ImageService,\n\t            private router: Router) {\n\t\tthis.observer = dataService.getImageObserver().subscribe(\n\t\t\tdata => {\n\t\t\t\tthis.image = data;\n\t\t\t}\n\t\t);\n\t}\n\n\tonEditClick() {\n\t\tthis.buttonClickService.trigger('imageEditClick');\n\t}\n\n\tonDeleteClick() {\n\t\tif (confirm('Delete this image?')) {\n\t\t\tthis.imageService.DeleteImage(this.image.id).subscribe(next => {\n\t\t\t\tlet options =\n\t\t\t\t\t{\n\t\t\t\t\t\tmessage: 'Image deleted',\n\t\t\t\t\t\tcontainer: '#editSuccessContainer',\n\t\t\t\t\t\tduration: 5000\n\t\t\t\t\t};\n\t\t\t\t$.meow(options);\n\n\t\t\t\tthis.router.navigate(['/gallery/' + this.image.gallery_id]);\n\t\t\t});\n\t\t}\n\t}\n\n\tngOnDestroy() {\n\t\tthis.observer.unsubscribe();\n\t}\n}\n","<image-edit [image]=\"image\"></image-edit>\n\n<div class=\"row\">\n\t<div class=\"pull-right\">\n\t\t<div class=\"btn-group\" role=\"group\" aria-label=\"...\">\n\t\t\t<button type=\"button\" (click)=\"onEditClick()\" class=\"btn btn-default\" id=\"imageEdit\" title=\"Edit image\" data-toggle=\"tooltip\"><span class=\"glyphicon glyphicon-pencil\"></span></button>\n\t\t\t<button type=\"button\" (click)=\"onDeleteClick()\" class=\"btn btn-default\" id=\"imageDelete\" title=\"Delete image\" data-toggle=\"tooltip\"><span class=\"glyphicon glyphicon-trash\"></span></button>\n\t\t</div>\n\t</div>\n</div>","import {Tag} from './tag.model';\nimport {ParentGallery} from './parent-gallery.model';\nimport {isArrayLike, isNumeric} from 'rxjs/internal-compatibility';\n\nexport class Gallery {\n    id: number;\n    name: string;\n    thumbId: number;\n    parentId: number;\n    parentGallery: ParentGallery;\n    tagList: Array<Tag>;\n    description: string;\n    useTags: boolean;\n    combinedView: boolean;\n\n    constructor(){\n        this.fromData({\n\t        id: 0,\n\t        name: '',\n\t        thumbId: 0,\n\t        parentId: 0,\n\t        tagList: [],\n\t        description: 'description',\n\t        useTags: true,\n\t        combinedView: false\n        });\n    }\n\n    public fromData(data) {\n    \tif (isNumeric(data.id))\n    \t    this.id = data.id;\n    \tif (typeof data.name === 'string')\n\t        this.name = data.name;\n\t    if (isNumeric(data.thumbId))\n\t\t    this.thumbId = data.thumbId;\n\t    if (isNumeric(data.parentId))\n\t\t    this.parentId = data.parentId;\n\t    if (typeof data.parentGallery === 'object') {\n\t\t    this.parentGallery.id = data.parentGallery.id;\n\t\t    this.parentGallery.name = data.parentGallery.name;\n\t    }\n\t    if (Array.isArray(data.tagList))\n\t\t    this.tagList = data.tagList;\n\t    if (typeof data.description === 'string')\n\t\t    this.description = data.description;\n\t    if (typeof data.useTags === 'boolean')\n\t\t    this.useTags = data.useTags;\n\t    if (typeof data.combinedView === 'boolean')\n\t\t    this.combinedView= data.combinedView;\n    }\n}\n","export class ParentGallery {\n    id: number;\n    name: string;\n\n    public fromData(data) {\n    \tthis.id = data.id;\n\t    this.name = data.name;\n    }\n}\n","import { Component, Input, Output, EventEmitter, ViewChild, ElementRef, HostListener, DoCheck } from '@angular/core';\nimport { NgBoxService } from './ngbox.service';\n\n\n@Component({\n    selector: 'my-ngbox, ngbox',\n    template: `\n        <div id=\"ngBoxLoading\" *ngIf=\"ngBox.loading\"><img src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNv\nZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxucz0iaHR0cD\novL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjAiIHdpZHRo\nPSIxNjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMTI4IDE2IiB4bWw6c3BhY2U9InByZXNlcnZlIj48c2NyaXB0IHR5cGU9InRleHQvZW\nNtYXNjcmlwdCIgeGxpbms6aHJlZj0iLy9wcmVsb2FkZXJzLm5ldC9qc2NyaXB0cy9zbWlsLnVzZXIuanMiLz48cGF0aCBmaWxsPSIjZmZmZmZmIiBm\naWxsLW9wYWNpdHk9IjAuNDE5NjA3ODQzMTM3MjUiIGQ9Ik02LjQsNC44QTMuMiwzLjIsMCwxLDEsMy4yLDgsMy4yLDMuMiwwLDAsMSw2LjQsNC44Wm\n0xMi44LDBBMy4yLDMuMiwwLDEsMSwxNiw4LDMuMiwzLjIsMCwwLDEsMTkuMiw0LjhaTTMyLDQuOEEzLjIsMy4yLDAsMSwxLDI4LjgsOCwzLjIsMy4y\nLDAsMCwxLDMyLDQuOFptMTIuOCwwQTMuMiwzLjIsMCwxLDEsNDEuNiw4LDMuMiwzLjIsMCwwLDEsNDQuOCw0LjhabTEyLjgsMEEzLjIsMy4yLDAsMS\nwxLDU0LjQsOCwzLjIsMy4yLDAsMCwxLDU3LjYsNC44Wm0xMi44LDBBMy4yLDMuMiwwLDEsMSw2Ny4yLDgsMy4yLDMuMiwwLDAsMSw3MC40LDQuOFpt\nMTIuOCwwQTMuMiwzLjIsMCwxLDEsODAsOCwzLjIsMy4yLDAsMCwxLDgzLjIsNC44Wk05Niw0LjhBMy4yLDMuMiwwLDEsMSw5Mi44LDgsMy4yLDMuMi\nwwLDAsMSw5Niw0LjhabTEyLjgsMEEzLjIsMy4yLDAsMSwxLDEwNS42LDgsMy4yLDMuMiwwLDAsMSwxMDguOCw0LjhabTEyLjgsMEEzLjIsMy4yLDAs\nMSwxLDExOC40LDgsMy4yLDMuMiwwLDAsMSwxMjEuNiw0LjhaIi8+PGc+PHBhdGggZmlsbD0iI2ZmZmZmZiIgZmlsbC1vcGFjaXR5PSIxIiBkPSJNLT\nQyLjcsMy44NEE0LjE2LDQuMTYsMCwwLDEtMzguNTQsOGE0LjE2LDQuMTYsMCwwLDEtNC4xNiw0LjE2QTQuMTYsNC4xNiwwLDAsMS00Ni44Niw4LDQu\nMTYsNC4xNiwwLDAsMS00Mi43LDMuODRabTEyLjgtLjY0QTQuOCw0LjgsMCwwLDEtMjUuMSw4YTQuOCw0LjgsMCwwLDEtNC44LDQuOEE0LjgsNC44LD\nAsMCwxLTM0LjcsOCw0LjgsNC44LDAsMCwxLTI5LjksMy4yWm0xMi44LS42NEE1LjQ0LDUuNDQsMCwwLDEtMTEuNjYsOGE1LjQ0LDUuNDQsMCwwLDEt\nNS40NCw1LjQ0QTUuNDQsNS40NCwwLDAsMS0yMi41NCw4LDUuNDQsNS40NCwwLDAsMS0xNy4xLDIuNTZaIi8+PGFuaW1hdGVUcmFuc2Zvcm0gYXR0cm\nlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJ0cmFuc2xhdGUiIHZhbHVlcz0iMjMgMDszNiAwOzQ5IDA7NjIgMDs3NC41IDA7ODcuNSAwOzEwMCAw\nOzExMyAwOzEyNS41IDA7MTM4LjUgMDsxNTEuNSAwOzE2NC41IDA7MTc4IDAiIGNhbGNNb2RlPSJkaXNjcmV0ZSIgZHVyPSI3ODBtcyIgcmVwZWF0Q2\n91bnQ9ImluZGVmaW5pdGUiLz48L2c+PC9zdmc+Cg==\"/></div>\n        <div id=\"ngBoxWrapper\" (click)=\"closeOutside($event)\" *ngIf=\"ngBox.open\" [ngStyle]=\"{'padding-top': offsetHeight+'px'}\">\n            <div id=\"ngBoxContent\">\n                <img *ngIf=\"getHasGroup()\" class=\"left\" (click)=\"previousNgBox()\" src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvb\nj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNS4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyB\nWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL\n0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDA\nwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iNzBweCIgaGVpZ2h0PSIxMDBwe\nCIgdmlld0JveD0iMCAwIDcwIDEwMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgNzAgMTAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwb2x5Z29uIGZpbGw\n9IiNGRkZGRkYiIHN0cm9rZT0iIzZCNkI2QiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludHM9IjQ1LjYsOTguNTI0IDE0LjU0NCw1MCA0NS42LDEuNDc2IDQ4L\njgwMSwzLjUyNCAxOS4wNTYsNTAgDQoJNDguODAxLDk2LjQ3NiAiLz4NCjwvc3ZnPg0K\">\n                <img *ngIf=\"getHasGroup()\" class=\"right\" (click)=\"nextNgBox()\" src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0i\nMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNS4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZX\nJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dy\nYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3\nN2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iNzBweCIgaGVpZ2h0PSIxMDBweCIg\ndmlld0JveD0iMCAwIDcwIDEwMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgNzAgMTAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwb2x5Z29uIGZpbGw9Ii\nNGRkZGRkYiIHN0cm9rZT0iIzZCNkI2QiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludHM9IjE3Ljc0Niw5OC41MjQgNDguODAxLDUwIDE3Ljc0NiwxLjQ3NiAx\nNC41NDUsMy41MjQgDQoJNDQuMjg5LDUwIDE0LjU0NSw5Ni40NzYgIi8+DQo8L3N2Zz4NCg==\">\n                <img *ngIf=\"ngBox.current.type == 1\"\n                     (load)=\"isLoaded()\"\n                     #ngBoxContent\n                     [src]=\"ngBox.current.url\"\n                     [hidden]=\"ngBox.loading\"\n                     (click)=\"nextNgBox()\"\n                     alt=\"\">\n                <iframe *ngIf=\"ngBox.current.type == 2\"\n                        #ngBoxContent\n                        [src]=\"ngBox.current.url\"\n                        width=\"{{ngBox.current.width}}\"\n                        height=\"{{ngBox.current.height}}\"\n                        frameborder=\"0\"\n                        allowfullscreen>\n                </iframe>\n                <iframe *ngIf=\"ngBox.current.type == 3\"\n                        [src]=\"ngBox.current.url\"\n                        #ngBoxContent\n                        width=\"{{ngBox.current.width}}\"\n                        height=\"{{ngBox.current.height}}\"\n                        frameborder=\"0\"\n                        webkitallowfullscreen\n                        mozallowfullscreen\n                        allowfullscreen>\n                </iframe>\n                <iframe *ngIf=\"ngBox.current.type == 4\"\n                        #ngBoxContent\n                        [src]=\"ngBox.current.url\"\n                        frameborder=\"0\"\n                        width=\"{{ngBox.current.width}}\"\n                        height=\"{{ngBox.current.height}}\"\n                        allowfullscreen>\n                </iframe>\n            </div>\n            <div #ngBoxButtons id=\"buttons\" [hidden]=\"ngBox.loading\">\n                <p>\n                    <span class=\"title\" *ngIf=\"ngBox.current.title\">{{ngBox.current.title}}<br/></span>\n                    <span class=\"pages\" *ngIf=\"getHasGroup()\">{{getCurrentIndex()}} of {{getCount()}}</span>\n                </p>\n                <img (click)=\"closeNgBox()\" id=\"closeButton\" src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZG\nluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNS4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAw\nIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy\n8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6\neGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMzBweCIgaGVpZ2h0PSIzMHB4IiB2aWV3Qm94PSIwID\nAgMzAgMzAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDMwIDMwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHN0cm9r\nZT0iIzZCNkI2QiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludHM9IjI4LjUsMi44NCAyNS40NjMsMS41IDE1LDEyLjc0OSA0LjUzOSwxLjUgMS41LDIuODQgDQ\noJMTIuODExLDE1IDEuNSwyNy4xNiA0LjUzOSwyOC41IDE1LDE3LjI1MSAyNS40NjMsMjguNSAyOC41LDI3LjE2IDE3LjE4OSwxNSAiLz4NCjwvc3ZnPg0K\" alt=\"\">\n            </div>\n\n\n\n\n\n\n        </div>\n    `,\n    styles: [`\n        #ngBoxLoading{\n            text-align: center;\n            z-index: 10001;\n            width: 100%;\n            height: 100%;\n            color: white;\n            position: fixed;\n            top: 46%;\n            font-size: 20px;\n        }\n        #ngBoxWrapper {\n            background-color: rgba(0, 0, 0, 0.9);\n            position: fixed;\n            top: 0px;\n            left: 0px;\n            text-align: center;\n            z-index: 10000;\n            width: 100%;\n            height: 100%;\n        }\n\n        #ngBoxWrapper #ngBoxContent img {\n            -webkit-border-radius: 4px;\n            -moz-border-radius: 4px;\n            border-radius: 4px;\n        }\n\n        #ngBoxContent {\n            display: block;\n        }\n\n        button {\n            font-size: 12px;\n        }\n\n        iframe {\n            max-width: 100%;\n            max-height: 100%;\n        }\n        #buttons{\n            position: relative;\n            margin: 5px auto;\n            text-align: right;\n        }\n        #buttons p{\n            float: left;\n            color: white;\n            text-align: left;\n            margin: 0 50px 0 0;\n            font-size: 12px;\n            font-family: sans-serif;\n        }\n        #buttons span.title{\n            display: block;\n            height: 18px;\n            overflow: hidden;\n        }\n        #closeButton{\n            position: absolute;\n            top: 0px;\n            right: 0px;\n            cursor: pointer;\n        }\n        .left{\n            position: fixed;\n            left: -5px;\n            margin-top: -42px;\n            cursor: pointer;\n            top: 50%;\n        }\n        .right{\n            position: fixed;\n            right: -10px;\n            margin-top: -42px;\n            cursor: pointer;\n            top: 50%;\n        }\n    `]\n})\nexport class NgBoxComponent implements DoCheck {\n\n    offsetHeight: number;\n    interval: any;\n    @Input() data: any;\n    @Output() showMore = new EventEmitter();\n    @ViewChild('ngBoxContent', {}) elementView: ElementRef;\n    @ViewChild('ngBoxButtons', {}) elementButtons: ElementRef;\n\n    constructor(\n        public ngBox: NgBoxService\n    ) {\n    }\n\n    ngDoCheck() {\n        if (this.ngBox.open === true && this.elementView === undefined) {\n            this.checkInterval();\n        }\n    }\n\n    closeOutside($event) {\n        if ($event.target.getAttribute('id') === 'ngBoxContent' || $event.target.getAttribute('id') === 'ngBoxWrapper') {\n            this.closeNgBox();\n        }\n    }\n\n    checkInterval() {\n        let t = setInterval(() => {\n            if (this.elementView && this.elementButtons  ) {\n                this.resize();\n                // Stop Loading on frames\n                if (this.ngBox.current.type === 2 || this.ngBox.current.type === 3 || this.ngBox.current.type === 4) {\n                    this.ngBox.loading = false;\n                }\n\n                clearInterval(t);\n            }\n        }, 10);\n    }\n\n    closeNgBox() {\n        this.ngBox.open = false;\n    }\n\n    elementExist() {\n        if (this.elementView !== undefined) {\n            return true;\n        }\n        return false;\n    }\n\n    @HostListener('window:resize', ['$event'])\n    resize() {\n        // Resize big images\n\n        if ( this.elementView && this.elementButtons) {\n            let currentWidth = this.calcPercent(this.ngBox.current.width, window.innerWidth);\n            let currentHeight = this.calcPercent(this.ngBox.current.height, window.innerHeight);\n\n            let realWidth   = this.elementView.nativeElement.naturalWidth ?\n                              this.elementView.nativeElement.naturalWidth : currentWidth;\n            let realHeight  = this.elementView.nativeElement.naturalHeight ?\n                              this.elementView.nativeElement.naturalHeight : currentHeight;\n\n\n            let maxWidth    = Math.min((window.innerWidth - 70), currentWidth ? currentWidth : realWidth);\n            let maxHeight   = Math.min((window.innerHeight - 60), currentHeight ? currentHeight : realHeight);\n\n            let ratio       = Math.min( maxWidth / realWidth, maxHeight / realHeight);\n\n            this.elementView.nativeElement.width    = realWidth * ratio;\n            this.elementView.nativeElement.height   = realHeight * ratio;\n\n\n            this.elementButtons.nativeElement.style.width = this.elementView.nativeElement.offsetWidth + 'px';\n\n            // Calculate top padding\n            this.offsetHeight = (window.innerHeight - 40 - this.elementView.nativeElement.offsetHeight) / 2;\n            if (this.offsetHeight < 0) {\n                this.offsetHeight = 0;\n            }\n        }\n    }\n\n\n\n\n    @HostListener('window:keydown', ['$event'])\n    checkKeyPress(event: KeyboardEvent) {\n        if ( event.keyCode === 39 ) {\n            this.nextNgBox();\n        }else if ( event.keyCode === 37 ) {\n            this.previousNgBox();\n        }else if ( event.keyCode === 27 ) {\n            this.closeNgBox();\n        }\n    }\n\n    calcPercent(value, of) {\n        if (value !== undefined && value.toString().search('%') >= 0) {\n            return of * parseInt(value.toString(), 0) / 100;\n        }\n        return value;\n    }\n\n    getHasGroup() {\n        return this.ngBox.current.group !== undefined;\n    }\n\n    getCount() {\n        return this.ngBox.images.filter(image => image.group === this.ngBox.current.group).length;\n    }\n\n    getCurrentIndex() {\n        let currentGroup = this.ngBox.images.filter(image => image.group === this.ngBox.current.group);\n        return currentGroup.map(function (e) {\n            return e.id;\n        }).indexOf(this.ngBox.current.id) + 1;\n    }\n\n    nextNgBox() {\n        if ( this.ngBox.current.group === undefined ) {\n            return false;\n        }\n        this.ngBox.loading = true;\n        let currentGroup = this.ngBox.images.filter(image => image.group === this.ngBox.current.group);\n        let pos = currentGroup.map(function (e) {\n            return e.id;\n        }).indexOf(this.ngBox.current.id);\n        if (pos >= currentGroup.length - 1) {\n            this.ngBox.current = currentGroup[0];\n        } else {\n            this.ngBox.current = currentGroup[pos + 1];\n        }\n        this.checkInterval();\n    }\n\n    previousNgBox() {\n        if ( this.ngBox.current.group === undefined ) {\n            return false;\n        }\n        this.ngBox.loading = true;\n        let currentGroup = this.ngBox.images.filter(image => image.group === this.ngBox.current.group);\n        let pos = currentGroup.map(function (e) {\n            return e.id;\n        }).indexOf(this.ngBox.current.id);\n        if (pos === 0) {\n            pos = currentGroup.length;\n        }\n        this.ngBox.current = currentGroup[pos - 1];\n        this.checkInterval();\n    }\n\n    isLoaded() {\n        if (this.ngBox.current.type === 1) {\n            this.ngBox.loading = false;\n        }\n\n        this.checkInterval();\n    }\n\n}\n","import { Directive, AfterViewInit, HostListener, Input, OnDestroy } from '@angular/core';\r\nimport { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';\r\nimport { NgBoxService } from './ngbox.service';\r\n\r\n@Directive({\r\n    selector: '[myNgBox],[ng-box]'\r\n})\r\nexport class NgBoxDirective implements AfterViewInit, OnDestroy {\r\n\r\n    id: number;\r\n    data: {};\r\n    @Input() src: any;\r\n    @Input() href: any;\r\n    @Input() title: string;\r\n    @Input() width: string;\r\n    @Input() height: string;\r\n    @Input() group: string;\r\n    @Input() cache: boolean;\r\n    @Input() image: boolean;\r\n    currentHref: string;\r\n\tcurrentSrc: string;\r\n\r\n    constructor(\r\n        public ngBox: NgBoxService,\r\n        public sanitizer: DomSanitizer\r\n    ) {\r\n    }\r\n\r\n\tngOnDestroy() {\r\n    \tthis.removeImage();\r\n\t}\r\n\r\n    ngAfterViewInit() {\r\n        this.ngBox.id = this.id = this.ngBox.id + 1;\r\n        this.updateImage();\r\n    }\r\n\r\n\tremoveImage() {\r\n\t\tlet pos = this.ngBox.images.map(function(e) { return e.id; }).indexOf(this.id);\r\n\t\tif (pos !== -1)\r\n\t\t\tthis.ngBox.images.splice(pos, 1);\r\n\t}\r\n\r\n    updateImage() {\r\n\t    let src = this.src ? this.src : this.href;\r\n\t    this.data = this.getData(src);\r\n\t    this.ngBox.images.push( this.data );\r\n    }\r\n\r\n    @HostListener('click', ['$event'])\r\n    onClick($event) {\r\n        $event.preventDefault();\r\n\r\n\t    this.removeImage();\r\n\t    this.updateImage();\r\n\r\n        this.ngBox.loading = true;\r\n        this.ngBox.current = this.data;\r\n        this.ngBox.open = true;\r\n    }\r\n\r\n    getData(url: string): SafeResourceUrl | boolean {\r\n        if (url !== undefined || url !== '') {\r\n            // Youtube\r\n            let regExp = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|\\&v=|\\?v=)([^#\\&\\?]*).*/;\r\n            let match = url.match(regExp);\r\n            if (match && match[2].length === 11) {\r\n                return {\r\n                    id: this.id,\r\n                    url: this.sanitizer.bypassSecurityTrustResourceUrl('https://www.youtube.com/embed/' + match[2] + '?autoplay=0'),\r\n                    type: 2,\r\n                    title: this.title,\r\n                    width: this.width ? this.width : 640,\r\n                    height: this.height ? this.height : 380,\r\n                    group: this.group\r\n                };\r\n            }\r\n            // Vimeo\r\n            regExp = /^.*(vimeo\\.com\\/)((channels\\/[A-z]+\\/)|(groups\\/[A-z]+\\/videos\\/))?([0-9]+)/;\r\n            match = url.match(regExp);\r\n            if (match && match[5].length === 8) {\r\n                return {\r\n                    id: this.id,\r\n                    url: this.sanitizer.bypassSecurityTrustResourceUrl('https://player.vimeo.com/video/' + match[5]),\r\n                    type: 3,\r\n                    title: this.title,\r\n                    width: this.width ? this.width : 640,\r\n                    height: this.height ? this.height : 380,\r\n                    group: this.group\r\n                };\r\n            }\r\n            if (!url.match(/\\.(png|jpg|jpeg|gif|JPG|PNG|JPEG|GIF)$/) && this.image !== true) {\r\n\r\n                return {\r\n                    id: this.id,\r\n                    url: this.sanitizer.bypassSecurityTrustResourceUrl(url),\r\n                    type: 4,\r\n                    title: this.title,\r\n                    width: this.width ? this.width : 1000,\r\n                    height: this.height ? this.height : 480,\r\n                    group: this.group\r\n                };\r\n            }\r\n/*            if (url.search('photoshooter') >= 0 || url.search('news247') >= 0) {\r\n                return {\r\n                    id: this.id,\r\n                    url: this.sanitizer.bypassSecurityTrustResourceUrl(url),\r\n                    type: 4,\r\n                    title: this.title,\r\n                    width: this.width ? this.width : 1000,\r\n                    height: this.height ? this.height : 480,\r\n                    group: this.group\r\n                };\r\n            }*/\r\n            if (this.cache) { (new Image()).src = url; }\r\n            return {\r\n                id: this.id,\r\n                url: url,\r\n                type: 1,\r\n                title: this.title,\r\n                width: this.width,\r\n                height: this.height,\r\n                group: this.group\r\n            };\r\n\r\n        }\r\n    }\r\n\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class NgBoxService {\r\n\r\n    public id = 0;\r\n    public current: any;\r\n    public loading = false;\r\n    public open = false;\r\n    public images: any = [];\r\n\r\n    constructor() { }\r\n\r\n}\r\n","import { Component, OnInit } from '@angular/core';\nimport {ActivatedRoute} from \"@angular/router\";\nimport {PageDataService} from \"../../services/page_data.service\";\nimport {Gallery} from '../../models/gallery';\nimport {GalleryService} from '../../services/gallery_service';\nimport {GalleryEntityService} from '../../services/gallery-entity.service';\nimport {Observable} from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { tap } from 'rxjs/operators';\nimport {SimpleGallery} from '../../models/simple_gallery';\nimport {SimpleGalleryEntityService} from '../../services/simple_gallery-entity.service';\n\n@Component({\n\tselector: 'gallery-page',\n\ttemplateUrl: './gallery-page.component.html',\n\tstyleUrls: ['./gallery-page.component.css']\n})\nexport class GalleryPageComponent implements OnInit {\n\n\tpublic gallery$: Observable<Gallery>;\n\tpublic simpleGalleries$: Observable<SimpleGallery[]>;\n\tpublic id: number = 32;\n\n\tconstructor(private route: ActivatedRoute,\n\t            private galleryEntityService: GalleryEntityService,\n\t            private simpleGalleryEntityService: SimpleGalleryEntityService) {\n\t\tconsole.log(this.route);\n\t}\n\n\tngOnInit(): void {\n\t\tthis.gallery$ = this.galleryEntityService.entities$\n\t\t\t.pipe(\n\t\t\t\ttap(galleries => {console.log(galleries)}),\n\t\t\t\tmap(galleries => galleries.find(gallery => gallery.id == this.id))\n\t\t\t);\n\t\tthis.simpleGalleries$ = this.simpleGalleryEntityService.entities$\n\t\t\t.pipe(\n\t\t\t\ttap(simpleGalleries => {console.log(simpleGalleries)}),\n\t\t\t\tmap(galleries => galleries.filter(gallery => gallery.parentId == this.id))\n\t\t\t);\n\t\tthis.simpleGalleryEntityService.getAll();\n\n\t\tthis.route.params.subscribe(params => {\n\t\t\tthis.galleryEntityService.getByKey(this.id);\n\t\t});\n\t}\n}\n","<div *ngIf=\"(gallery$ | async) as gallery\">\n\t<gallery-toolbar [gallery]=\"gallery\"></gallery-toolbar>\n\t<div class=\"course\">\n\t\t[{{gallery | json}}]\n\t</div>\n</div>\n[\n<div class=\"course\" *ngFor=\"let simpleGallery of (simpleGalleries$ | async)\">\n\t{{simpleGallery | json}}\n</div>\n]\n<gallery-info></gallery-info>\n<gallery-list></gallery-list>\n<image-list></image-list>\n","import {Component, OnInit} from '@angular/core';\nimport {PageDataService} from \"../../services/page_data.service\";\n\n@Component({\n    selector: 'moa',\n    templateUrl: './home-page.component.html',\n    styleUrls: ['./home-page.component.css']\n})\nexport class HomePageComponent implements OnInit {\n    constructor(private page_data_service: PageDataService) {\n    }\n\n    ngOnInit(): void {\n    \tthis.page_data_service.GetHomePageData();\n    }\n}\n","<home-toolbar></home-toolbar>\n\n<gallery-list></gallery-list>","import { Component, OnInit } from '@angular/core';\nimport {ActivatedRoute} from \"@angular/router\";\nimport {PageDataService} from \"../../services/page_data.service\";\n\n@Component({\n  selector: 'image-page',\n  templateUrl: './image-page.component.html',\n  styleUrls: ['./image-page.component.css']\n})\nexport class ImagePageComponent implements OnInit {\n\n  constructor(private route: ActivatedRoute,\n              private page_data_service: PageDataService) { }\n\n  ngOnInit() {\n\t  this.route.params.subscribe(params => {\n\t\t  this.page_data_service.GetImagePageData(params['image_id'], params['gallery_id']);\n\t  });\n  }\n\n}\n","<image-toolbar></image-toolbar>\n<image-info></image-info>","import {\n\tActionReducer,\n\tActionReducerMap,\n\tcreateFeatureSelector,\n\tcreateSelector,\n\tMetaReducer\n} from '@ngrx/store';\nimport { environment } from '../../environments/environment';\nimport {routerReducer} from '@ngrx/router-store';\n\nexport interface AppState {\n\n}\n\nexport const reducers: ActionReducerMap<AppState> = {\n\trouter: routerReducer\n};\n\nexport function logger(reducer:ActionReducer<any>)\n\t: ActionReducer<any> {\n\treturn (state, action) => {\n\t\tconsole.log(\"state before: \", state);\n\t\tconsole.log(\"action\", action);\n\n\t\treturn reducer(state, action);\n\t}\n\n}\n\n\nexport const metaReducers: MetaReducer<AppState>[] =\n\t!environment.production ? [logger] : [];\n\n\n","import { Injectable } from '@angular/core';\nimport {Subject} from \"rxjs\";\n\n@Injectable()\nexport class ButtonClickService {\n\n\tprivate notify = new Subject<any>();\n\tnotifyObservable$ = this.notify.asObservable();\n\n\tconstructor() {}\n\n\tpublic trigger(name: string, data: any = null) {\n\t\tif (name) {\n\t\t\tthis.notify.next({\n\t\t\t\tname: name,\n\t\t\t\tdata: data\n\t\t\t});\n\t\t}\n\t}\n}\n","import {Injectable} from \"@angular/core\";\nimport {HttpClient} from \"@angular/common/http\";\nimport {BehaviorSubject} from \"rxjs\";\nimport {Observable} from \"rxjs/\";\nimport 'rxjs/add/operator/map';\nimport 'rxjs/add/operator/filter';\n\n@Injectable()\nexport class DataService {\n    data: BehaviorSubject<any>;\n\n    constructor(private http: HttpClient) {\n        this.data = new BehaviorSubject<any>([]);\n    }\n\n    setPageData(pageData): void {\n        this.data.next(pageData);\n    }\n\n    getBreadcrumbObserver(): Observable<any> {\n        return this.data\n            .map(data => {\n                return data.breadcrumbs;\n            })\n            .filter(data => data !== undefined);\n    }\n\n    getGalleriesObserver(): Observable<any> {\n        return this.data\n            .map(data => {\n                return data.galleries;\n            })\n            .filter(data => data !== undefined);\n    }\n\n\tgetGalleryObserver(): Observable<any> {\n\t\treturn this.data\n\t\t\t.map(data => {\n\t\t\t\t// TODO: Convert to Gallery model?\n\t\t\t\treturn data.gallery;\n\t\t\t})\n\t\t\t.filter(data => data !== undefined);\n\t}\n\n\tgetImageObserver(): Observable<any> {\n\t\treturn this.data\n\t\t\t.map(data => {\n\t\t\t\t// TODO: Convert to Image model?\n\t\t\t\treturn data.image;\n\t\t\t})\n\t\t\t.filter(data => data !== undefined);\n\t}\n\n\tgetImagesObserver(): Observable<any> {\n\t\treturn this.data\n\t\t\t.map(data => {\n\t\t\t\treturn data.images;\n\t\t\t})\n\t\t\t.filter(data => data !== undefined);\n\t}\n\n\tgetPageTitleObserver(): Observable<any> {\n\t\treturn this.data\n\t\t\t.map(data => {\n\t\t\t\treturn data.page_title;\n\t\t\t})\n\t\t\t.filter(data => data !== undefined);\n\t}\n\n}\n","import {EntityCollectionServiceBase, EntityCollectionServiceElementsFactory} from '@ngrx/data';\nimport {Gallery} from '../models/gallery';\nimport {Injectable} from '@angular/core';\n\n@Injectable()\nexport class GalleryEntityService extends EntityCollectionServiceBase<Gallery> {\n\tconstructor(serviceElementsFactory: EntityCollectionServiceElementsFactory) {\n\t\tsuper('Gallery', serviceElementsFactory);\n\t}\n}\n","import {Injectable} from '@angular/core';\nimport {DefaultDataService, HttpUrlGenerator} from '@ngrx/data';\nimport {Gallery} from '../models/gallery';\nimport {HttpClient} from '@angular/common/http';\nimport {Observable} from 'rxjs';\n\n@Injectable()\nexport class GalleryDataService extends DefaultDataService<Gallery> {\n\tconstructor(http: HttpClient, httpUrlGenerator: HttpUrlGenerator) {\n\t\tsuper('Gallery', http, httpUrlGenerator);\n\t}\n\n\t/*public getById(key: number | string): Observable<any> {\n\t\treturn this.http.get('/api/page_data/gallery_page/' + key);\n\t}*/\n}\n","import {Injectable} from \"@angular/core\";\nimport {DataService} from \"./data.service\";\nimport {HttpClient} from \"@angular/common/http\";\nimport {Subject} from \"rxjs\";\nimport {Observable} from \"rxjs\";\nimport {Gallery} from '../models/gallery.model';\nimport {Subscription} from 'rxjs/Subscription';\nimport {ParentGallery} from '../models/parent-gallery.model';\n\n@Injectable()\nexport class GalleryService {\n\tget gallery(): Gallery {\n\t\treturn this._gallery;\n\t}\n\n\tprotected api_url: string = '/api/gallery/';\n\tprivate _gallery: Gallery;\n\n\tprivate galleryObserver: Subscription;\n\n\tconstructor(private dataService: DataService,\n\t            private http: HttpClient) {\n\t\tthis._gallery = new Gallery();\n\t\tthis._gallery.tagList = [];\n\t\tthis._gallery.parentGallery = new ParentGallery();\n\t\tthis.galleryObserver = dataService.getGalleryObserver().subscribe(\n\t\t\tdata => {\n\t\t\t\tthis._gallery.fromData(data);\n\t\t\t}\n\t\t);\n\t}\n\n\tSubmitGallery(data): Observable<any> {\n\t\tlet url = this.api_url + data.id;\n\t\tlet subject = new Subject();\n\n\t\tlet body = {\n\t\t\tname: data.name,\n\t\t\tdescription: data.description,\n\t\t\tparent: data.parent,\n\t\t\ttags: data.tags,\n\t\t\tuseTags: data.useTags,\n\t\t\tshowImages: data.showImages\n\t\t};\n\n\t\tif (data.id > 0) {\n\t\t\tthis.http.put(url, body).subscribe(data => {\n\t\t\t\tsubject.next({success: data['success'], message: data['message']});\n\t\t\t\tthis.dataService.setPageData(data);\n\t\t\t});\n\t\t} else {\n\t\t\tthis.http.post(url, body).subscribe(data => {\n\t\t\t\tsubject.next({success: data['success'], message: data['message']});\n\t\t\t\tthis.dataService.setPageData(data);\n\t\t\t});\n\t\t}\n\n\t\treturn subject.asObservable();\n\t}\n\n\tDeleteGallery(id): Observable<any> {\n\t\tlet url = this.api_url + id;\n\t\tlet subject = new Subject();\n\n\t\tthis.http.delete(url)\n\t\t\t.subscribe(data => {\n\t\t\t\tsubject.next({success: data['success'], message: data['message']});\n\t\t\t});\n\n\t\treturn subject.asObservable();\n\t}\n}\n","import {Injectable} from \"@angular/core\";\nimport {DataService} from \"./data.service\";\nimport {HttpClient} from \"@angular/common/http\";\nimport {Subject} from \"rxjs\";\nimport {Observable} from \"rxjs\";\n\n@Injectable()\nexport class ImageService {\n\n\tprotected api_url: string = '/api/image/';\n\n\tconstructor(private dataService: DataService,\n\t            private http: HttpClient) {\n\t}\n\n\tSubmitImages(data): Observable<any> {\n\t\tlet url = this.api_url + data.id;\n\t\tlet subject = new Subject();\n\n\t\tlet body = {\n\t\t\tid: data.id,\n\t\t\tgallery_id: data.gallery_id,\n\t\t\tdescription: data.description,\n\t\t\ttags: data.tags,\n\t\t\tfileHashes: data.fileHashes\n\t\t};\n\n\t\tif (data.id > 0) {\n\t\t\tthis.http.put(url, body).subscribe(data => {\n\t\t\t\tsubject.next({success: data['success'], message: data['message']});\n\t\t\t\tthis.dataService.setPageData(data);\n\t\t\t});\n\t\t} else {\n\t\t\tthis.http.post(url, body).subscribe(data => {\n\t\t\t\tsubject.next({success: data['success'], message: data['message']});\n\t\t\t\tthis.dataService.setPageData(data);\n\t\t\t});\n\t\t}\n\n\t\treturn subject.asObservable();\n\t}\n\n\tDeleteImage(id): Observable<any> {\n\t\tlet url = this.api_url + id;\n\t\tlet subject = new Subject();\n\n\t\tthis.http.delete(url)\n\t\t\t.subscribe(data => {\n\t\t\t\tsubject.next({success: data['success'], message: data['message']});\n\t\t\t});\n\n\t\treturn subject.asObservable();\n\t}\n}\n","import {Injectable} from \"@angular/core\";\nimport {DataService} from \"./data.service\";\nimport {HttpClient} from \"@angular/common/http\";\n\n@Injectable()\nexport class PageDataService {\n\tprotected api_url: string = '/api/page_data/';\n\n    constructor(private data_service: DataService, private http: HttpClient) {\n    }\n\n    GetPageData(url: string) {\n\t    this.http.get(url).subscribe(data => {\n\t\t    this.data_service.setPageData(data);\n\t    });\n    }\n\n    GetHomePageData() {\n\t    let url = this.api_url + 'home_page';\n\t    this.GetPageData(url);\n    }\n\n\tGetGalleryPageData(id: number) {\n\t\tlet url = this.api_url + 'gallery_page/' + id;\n\t\tthis.GetPageData(url);\n\t}\n\n\tGetImagePageData(image_id: number, gallery_id: number) {\n\t\tlet url = this.api_url + 'image_page/' + gallery_id + '/' + image_id;\n\t\tthis.GetPageData(url);\n\t}\n}","import {Injectable, OnDestroy} from \"@angular/core\";\nimport {Subscription} from \"rxjs\";\nimport {DataService} from \"./data.service\";\n\n@Injectable()\nexport class PageTitleService implements OnDestroy{\n\n\tobserver: Subscription;\n\n    constructor(private service: DataService) {\n\t    this.observer = service.getPageTitleObserver().subscribe(\n\t\t    data => {\n\t\t\t\tdocument.title = data;\n\t\t    }\n\t    );\n    }\n\n\tngOnDestroy(): void {\n\t\tthis.observer.unsubscribe();\n\t}\n}\n","import {EntityCollectionServiceBase, EntityCollectionServiceElementsFactory} from '@ngrx/data';\nimport {SimpleGallery} from '../models/simple_gallery';\nimport {Injectable} from '@angular/core';\n\n@Injectable()\nexport class SimpleGalleryEntityService extends EntityCollectionServiceBase<SimpleGallery> {\n\tconstructor(serviceElementsFactory: EntityCollectionServiceElementsFactory) {\n\t\tsuper('SimpleGallery', serviceElementsFactory);\n\t}\n}\n","import {Injectable} from '@angular/core';\nimport {DefaultDataService, HttpUrlGenerator} from '@ngrx/data';\nimport {SimpleGallery} from '../models/simple_gallery';\nimport {HttpClient} from '@angular/common/http';\n\n@Injectable()\nexport class SimpleGalleryDataService extends DefaultDataService<SimpleGallery> {\n\tconstructor(http: HttpClient, httpUrlGenerator: HttpUrlGenerator) {\n\t\tsuper('SimpleGallery', http, httpUrlGenerator);\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport {Subject} from \"rxjs\";\nimport {HttpClient} from \"@angular/common/http\";\nimport {Observable} from \"rxjs\";\n\n@Injectable()\nexport class ThumbnailService {\n\n\tprivate api_url: string = '/api/thumbnail_status';\n\n\tconstructor(private http: HttpClient) {}\n\n\tpublic getStatus(data: Array<number> = null): Observable<any> {\n\t\tlet subject = new Subject();\n\n\t\tlet params = data.join(',');\n\t\tlet url = this.api_url + '?images=' + params;\n\n\t\tthis.http.get(url).subscribe(data => {\n\t\t\tsubject.next(data);\n\t\t});\n\n\t\treturn subject.asObservable();\n\t}\n}\n","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n  production: false\n};\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n"],"names":[],"sourceRoot":"webpack:///"}